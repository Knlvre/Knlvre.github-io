
<!DOCTYPE html>
<html lang class="loading">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mysql数据库 - Knlvre</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate">
    <meta name="keywords" content="TriDiamond Obsidian,"> 
    <meta name="description" content="（一）数据库安全【Tip】Grant：授予
Privilege： 特权
Revoke：废除
Anonymous：匿名的
Recurse：递归
【原理】​    （1）数据库系统分为内部安全性和外部安,"> 
    <meta name="author" content="Knlvre"> 
    <link rel="alternative" href="atom.xml" title="Knlvre" type="application/atom+xml"> 
    <link rel="icon" href="/knlvre.github.io/img/favicon.png"> 
    <link href="https://fonts.loli.net/css?family=Roboto+Mono|Rubik&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_1429596_nzgqgvnmkjb.css">
    <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.7.2/animate.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">
    <link rel="stylesheet" href="//cdn.bootcss.com/codemirror/5.48.4/codemirror.min.css">
    <link rel="stylesheet" href="//cdn.bootcss.com/codemirror/5.48.4/theme/dracula.css">
    <link rel="stylesheet" href="/knlvre.github.io/css/obsidian.css">
    <link rel="stylesheet" href="/knlvre.github.io/css/ball-atom.min.css">
</head>
</html>

<body class="loading">
    <div class="loader">
        <div class="la-ball-atom la-2x">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
    <span id="config-title" style="display:none">Knlvre</span>
    <div id="loader"></div>
    <div id="single">
    <div class="scrollbar gradient-bg-rev"></div>
<div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <div class="navigation animated fadeIn fast delay-1s">
        <img id="home-icon" class="icon-home" src="/img/favicon.png" alt="" data-url="https://knlvre.github.io">
        <div id="play-icon" title="Play/Pause" class="iconfont icon-play"></div>
        <h3 class="subtitle">Mysql数据库</h3>
        <div class="social">
            <!--        <div class="like-icon">-->
            <!--            <a href="javascript:;" class="likeThis active"><span class="icon-like"></span><span class="count">76</span></a>-->
            <!--        </div>-->
            <div>
                <div class="share">
                    
                        <a href="javascript:;" class="iconfont icon-share1"></a>
                        <div class="share-component-cc" data-disabled="facebook,douban,linkedin,diandian,tencent,google"></div>
                    
                </div>
            </div>
        </div>
    </div>
</div>

    <div class="section">
        <div class=article-header-wrapper>
    <div class="article-header">
        <div class="article-cover animated fadeIn" style="
            animation-delay: 600ms;
            animation-duration: 1.2s;
            background-image: 
                radial-gradient(ellipse closest-side, rgba(0, 0, 0, 0.65), #100e17),
                url(http://pic.netbian.com/uploads/allimg/171206/231312-1512573192ad02.jpg);">
        </div>
        <div class="else">
            <p class="animated fadeInDown">
                
                <a href="javascript:;"><b>「 </b>Article<b> 」</b></a>
                
                March 14, 2019
            </p>
            <h3 class="post-title animated fadeInDown"><a href="/knlvre.github.io/2019/03/14/MySQL5数据库配置与管理/" title="Mysql数据库">Mysql数据库</a>
            </h3>
            
            <p class="post-count animated fadeInDown">
                
                <span>
                    <b class="iconfont icon-text2"></b> <i>Words count</i>
                    125k
                </span>
                
                
                <span>
                    <b class="iconfont icon-timer__s"></b> <i>Reading time</i>
                    1:54
                </span>
                
                
                
                <span id="busuanzi_container_page_pv">
                    <b class="iconfont icon-read"></b> <i>Read count</i>
                    <span id="busuanzi_value_page_pv">0</span>
                </span>
                
            </p>
            
            
            <ul class="animated fadeInDown post-tags-list"><li class="animated fadeInDown post-tags-list-item"><a class="animated fadeInDown post-tags-list-link" href="/knlvre.github.io/tags/基础知识点/">基础知识点</a></li></ul>
            
        </div>
    </div>
</div>

<div class="screen-gradient-after">
    <div class="screen-gradient-content">
        <div class="screen-gradient-content-inside">
            <div class="bold-underline-links screen-gradient-sponsor">
                <p>
                    <span class="animated fadeIn delay-1s"></span>
                </p>
            </div>
        </div>
    </div>
</div>

<div class="article">
    <div class='main'>
        <div class="content markdown animated fadeIn">
            <h1 id="（一）数据库安全"><a href="#（一）数据库安全" class="headerlink" title="（一）数据库安全"></a>（一）数据库安全</h1><h2 id="【Tip】"><a href="#【Tip】" class="headerlink" title="【Tip】"></a>【Tip】</h2><pre><code>Grant：授予
Privilege： 特权
Revoke：废除
Anonymous：匿名的
Recurse：递归
</code></pre><h2 id="【原理】"><a href="#【原理】" class="headerlink" title="【原理】"></a>【原理】</h2><p>​    （1）数据库系统分为内部安全性和外部安全性。</p>
<p>​    （2）<strong>内部安全性</strong>关心的是文件系统级的问题，既防止Mysql数据目录（DATADIR）被在服务器主机有账号的人（合法或盗取的）进行攻击。如果数据目录内容的权限过分授予，使得每个人均能简单地替代对应于那些数据库表的文件，那么确保控制客户通过网络访问的授权表设置正确，对此毫无意义。</p>
<p>​    （3）<strong>外部安全性</strong>关心的是从外部通过网络连接服务器的客户的问题，既保护Mysql服务器免受来自通过网络对服务器的连接的攻击。必须设置Mysql授权表（grant table），使得他们不允许访问服务器管理的数据库内容，除非提供有效用户名和口令。</p>
<h2 id="【步骤】"><a href="#【步骤】" class="headerlink" title="【步骤】"></a>【步骤】</h2><h3 id="一、"><a href="#一、" class="headerlink" title="一、"></a>一、</h3><h4 id="1-1-启动mysql服务"><a href="#1-1-启动mysql服务" class="headerlink" title="1.1 启动mysql服务"></a>1.1 启动mysql服务</h4><pre><code>service mysqld restart
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/1-1.png" alt="1"></p>
<h4 id="1-2-进入mysql，并且创建一个新的数据库"><a href="#1-2-进入mysql，并且创建一个新的数据库" class="headerlink" title="1.2 进入mysql，并且创建一个新的数据库"></a>1.2 进入mysql，并且创建一个新的数据库</h4><pre><code>mysql
create database HSW;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/1-2.png" alt="1-2"></p>
<h4 id="1-3-创建一个新用户，命名为：student"><a href="#1-3-创建一个新用户，命名为：student" class="headerlink" title="1.3 创建一个新用户，命名为：student"></a>1.3 创建一个新用户，命名为：student</h4><pre><code>create user &#39;student&#39;@&#39;localhost&#39;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/1-3.png" alt="1-3"></p>
<h4 id="1-4-并给予相应数据库的权限"><a href="#1-4-并给予相应数据库的权限" class="headerlink" title="1.4 并给予相应数据库的权限"></a>1.4 并给予相应数据库的权限</h4><pre><code>grant all privileges on HSW.* to &#39;student&#39;@&#39;localhost&#39; with grant option;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/1-4.png" alt="1-4"></p>
<h4 id="1-5-刷新权限"><a href="#1-5-刷新权限" class="headerlink" title="1.5 刷新权限"></a>1.5 刷新权限</h4><pre><code>flush privileges;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/1-5.png" alt="1-5"></p>
<h4 id="1-6-显示授权"><a href="#1-6-显示授权" class="headerlink" title="1.6 显示授权"></a>1.6 显示授权</h4><pre><code>show grants;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/1-6.png" alt="1-6"></p>
<h4 id="1-7-移除授权"><a href="#1-7-移除授权" class="headerlink" title="1.7 移除授权"></a>1.7 移除授权</h4><pre><code>revoke delete on HSW.* from &#39;student&#39;@&#39;localhost&#39;；
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/1-7.png" alt="1-7"></p>
<h4 id="1-8-为用户重命名"><a href="#1-8-为用户重命名" class="headerlink" title="1.8 为用户重命名"></a>1.8 为用户重命名</h4><pre><code>rename user &#39;student&#39;@&#39;localhost&#39; to &#39;Knlvre&#39;@&#39;localhost&#39;；
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/1-8.png" alt="1-8"></p>
<h4 id="1-9-为用户设置或更改密码"><a href="#1-9-为用户设置或更改密码" class="headerlink" title="1.9 为用户设置或更改密码"></a>1.9 为用户设置或更改密码</h4><pre><code>SET PASSWORD FOR &#39;Knlvre&#39;@&#39;localhost&#39; = PASSWORD(&#39;666666&#39;);
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/1-9.png" alt="1-9"></p>
<h4 id="1-10-删除数据库"><a href="#1-10-删除数据库" class="headerlink" title="1.10 删除数据库"></a>1.10 删除数据库</h4><pre><code>drop database HSW;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/1-10.png" alt="1-10"></p>
<h4 id="1-11-删除用户"><a href="#1-11-删除用户" class="headerlink" title="1.11 删除用户"></a>1.11 删除用户</h4><pre><code>drop user &#39;Knlvre&#39;@&#39;localhost&#39;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/1-11.png" alt="1-11"></p>
<h3 id="二、安全设置"><a href="#二、安全设置" class="headerlink" title="二、安全设置"></a>二、安全设置</h3><h4 id="2-1-启动mysql服务"><a href="#2-1-启动mysql服务" class="headerlink" title="2.1 启动mysql服务"></a>2.1 启动mysql服务</h4><pre><code>service mysqld restart
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/2-1.png" alt="2-1"></p>
<h4 id="2-2-修改root用户的口令"><a href="#2-2-修改root用户的口令" class="headerlink" title="2.2 修改root用户的口令"></a>2.2 修改root用户的口令</h4><p>方法1</p>
<pre><code>mysqladmin -u root -p password 666
</code></pre><p>这时，系统会提醒你输入旧密码，如果没有就直接回车（这里是没有密码的）</p>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/2-2.png" alt="2-2"></p>
<p>方法2</p>
<p>在方法1当中并没有进入mysql而去设置密码，本方法中需要先进入mysql，需要输入刚才设置的密码’666’</p>
<pre><code>mysql -u root -p
</code></pre><p>设置密码</p>
<pre><code>set password for root@localhost=password(&#39;666&#39;);
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/2-3.png" alt="2-3"></p>
<p>方法3</p>
<p>最后一句<strong>flush privileges</strong>的意思是强制刷新内存授权表，否则用的还是缓存的口令，这是非法用户还可以用root用户及空口令登陆，直到重启Mysql服务器</p>
<pre><code>use mysql;
update user set password=password(&#39;666&#39;) where user=&#39;root&#39;;
flush privileges;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/2-4.png" alt="2-4"></p>
<h4 id="2-3-删除默认的数据库和用户"><a href="#2-3-删除默认的数据库和用户" class="headerlink" title="2.3 删除默认的数据库和用户"></a>2.3 删除默认的数据库和用户</h4><p>我们的数据库是在本地，并且也只需要本地的php脚本对mysql进行读取。mysql初始化后会自动生成空用户和test库，这会对数据库构成威胁，我们全部删除。我们使用mysql客户端程序连接到本地的mysql服务器后出现如下提示</p>
<pre><code>drop database test;
use mysql;
delete from db;
delete from user where not(host=&quot;localhost&quot; and user=&quot;root&quot;);
flush pricileges;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/2-5.png" alt="2-5"></p>
<h4 id="2-4-改变默认mysql管理员的名称"><a href="#2-4-改变默认mysql管理员的名称" class="headerlink" title="2.4 改变默认mysql管理员的名称"></a>2.4 改变默认mysql管理员的名称</h4><p>这个工作是可以选择的，根据个人习惯，因为默认的mysql的管理员名称是root，所以如果能够修改的话，能够防止一些脚本小子对系统的穷举。我们可以直接修改数据库，把root用户改为“admin”</p>
<pre><code>use mysql;
update user set user=&quot;admin&quot; where user=&quot;root&quot;;
flush privileges;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/2-6.png" alt="2-6"></p>
<h4 id="2-5-提高本地安全性"><a href="#2-5-提高本地安全性" class="headerlink" title="2.5 提高本地安全性"></a>2.5 提高本地安全性</h4><p>主要是防止mysql对本地文件的存取，比如黑客通过mysql把/etc/passwd获取了，会对系统构成威胁。mysql对本地文件的存取是通过SQL语句来实现的，主要是通过Load DATA LOCAL INFILE来实现，我们能通过禁用该功能来防止黑客通过SQL注入等获取系统核心文件。禁用该功能必须在<strong>etc文件夹</strong>下的<strong>my.cnf文件</strong>的<strong>[mysqld]</strong>部分加上一个参数，如图所示</p>
<pre><code>set-variable=local-infile=0
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/2-7.png" alt="2-7"></p>
<h4 id="2-6-禁止远程链接mysql"><a href="#2-6-禁止远程链接mysql" class="headerlink" title="2.6 禁止远程链接mysql"></a>2.6 禁止远程链接mysql</h4><p>因为我们的mysql只需要本地的php脚本进行连接，所以我们无需开socket进行监听，那么我们完全可以关闭监听的功能，还是配置在<strong>etc文件夹</strong>下的<strong>my.cnf文件</strong>的<strong>[mysqld]</strong>部分添加内容：</p>
<pre><code>skip-networking
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/2-8.png" alt="2-8"></p>
<h4 id="2-7-控制数据库访问权限"><a href="#2-7-控制数据库访问权限" class="headerlink" title="2.7 控制数据库访问权限"></a>2.7 控制数据库访问权限</h4><p>对于使用php脚本来进行交互，最好建立一个用户只针对某个库拥有所有的操作权限，这样就很好避免了数据库用户名和密码被黑客查看后最小损失</p>
<p>创建一个数据库为db1</p>
<pre><code>create database db1;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/2-9.png" alt="2-9"></p>
<p>然后同时建立一个口令为adminab的用户test1能够访问该数据库</p>
<pre><code>grant all privileges on db1.* to &#39;test1&#39;@&#39;localhost&#39; identified by &#39;adminab&#39; with grant option;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/2-10.png" alt="2-10"></p>
<p>以上SQL是创建一个数据库db1，同时增加一个test1用户，对db1库有全部的操作权限，口令是adminab，但是它只能从本地连接mysql</p>
<h4 id="2-8-限制一般用户浏览其他数据库"><a href="#2-8-限制一般用户浏览其他数据库" class="headerlink" title="2.8 限制一般用户浏览其他数据库"></a>2.8 限制一般用户浏览其他数据库</h4><p>如果有多个数据库，每个数据库有一个用户，那么必须限制用户浏览其他数据库内容，可以在启动mysql服务器时加上<strong>–skip-show-database</strong>启动</p>
<pre><code>service mysqld restart --skip-show-database
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/2-11.png" alt="2-11"></p>
<h3 id="三、vsFTP安全设置"><a href="#三、vsFTP安全设置" class="headerlink" title="三、vsFTP安全设置"></a>三、vsFTP安全设置</h3><p><strong>vsFTPd</strong>是一款非常著名的<strong>ftp daemon</strong>程序，目前包括<strong>Redhat</strong>在内很多大公司都在使用，它是一款安全性很高的程序</p>
<p>vsFTPd设置选项比较多，涉及方方面面，我们下面主要是针对安全方面进行设置</p>
<p>目前我们的需求就是使用系统账户的同时也作为FTP账户来进行文件的管理，目前假设我只需要一个账户来更新我的网站，并且我不希望该账户能够登陆系统，比如网站目录是在<strong>/usr/www</strong>下面，那么我们创建一个用户<strong>ftp</strong>，它的主目录是<strong>/usr/www</strong>，并且它的shell是<strong>/usr/sbin/nologin</strong>，就是没有shell，防止该用户通过<strong>ssh</strong>等登陆到系统</p>
<p>下面是针对vsftpd的配置文件<strong>vsftpd.conf文件</strong>的配置。</p>
<h4 id="3-1-禁止匿名用户"><a href="#3-1-禁止匿名用户" class="headerlink" title="3.1 禁止匿名用户"></a>3.1 禁止匿名用户</h4><pre><code>anonymous_enable=NO
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/3-1.png" alt="3-1"></p>
<h4 id="3-2-允许本地用户登陆"><a href="#3-2-允许本地用户登陆" class="headerlink" title="3.2 允许本地用户登陆"></a>3.2 允许本地用户登陆</h4><pre><code>local_enable=YES
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/3-2.png" alt="3-2"></p>
<h4 id="3-3-只允许系统中的ftp用户或者某些指定的用户访问ftp，打开用户文件列表功能"><a href="#3-3-只允许系统中的ftp用户或者某些指定的用户访问ftp，打开用户文件列表功能" class="headerlink" title="3.3 只允许系统中的ftp用户或者某些指定的用户访问ftp，打开用户文件列表功能"></a>3.3 只允许系统中的ftp用户或者某些指定的用户访问ftp，打开用户文件列表功能</h4><pre><code>userlist_enable=YES
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/3-3.png" alt="3-3"></p>
<h4 id="3-4-只允许用户文件列表中的用户访问ftp-以及用户名文件列表路径"><a href="#3-4-只允许用户文件列表中的用户访问ftp-以及用户名文件列表路径" class="headerlink" title="3.4 只允许用户文件列表中的用户访问ftp:以及用户名文件列表路径"></a>3.4 只允许用户文件列表中的用户访问ftp:以及用户名文件列表路径</h4><pre><code>userlist_deny=NO
userlist_file=/etc/vsftpd.user_list
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/3-4.png" alt="3-4"></p>
<h4 id="3-5-对vsftpd的用户使用pam认证"><a href="#3-5-对vsftpd的用户使用pam认证" class="headerlink" title="3.5 对vsftpd的用户使用pam认证"></a>3.5 对vsftpd的用户使用pam认证</h4><pre><code>pam_service_name=vsftpd
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/3-5.png" alt="3-5"></p>
<h4 id="3-6-需要指出vsftpd进行pam认证时所使用的pam配置文件名，默认值是vsftpd。把本地用户锁定在自己的主目录，防止转到其他目录"><a href="#3-6-需要指出vsftpd进行pam认证时所使用的pam配置文件名，默认值是vsftpd。把本地用户锁定在自己的主目录，防止转到其他目录" class="headerlink" title="3.6 需要指出vsftpd进行pam认证时所使用的pam配置文件名，默认值是vsftpd。把本地用户锁定在自己的主目录，防止转到其他目录"></a>3.6 需要指出vsftpd进行pam认证时所使用的pam配置文件名，默认值是vsftpd。把本地用户锁定在自己的主目录，防止转到其他目录</h4><pre><code>chroot_local_users=NO
chroot_list_enable=YES
chroot_list_file=/etc/vsftpd.chroot_list
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/3-6.png" alt="3-6"></p>
<h4 id="3-7-然后在-etc下创建vsftpd-chroot-list文件，里面把我们要限制的本地账户加进去，一行一个，我们加上ftp，防止它登录到系统"><a href="#3-7-然后在-etc下创建vsftpd-chroot-list文件，里面把我们要限制的本地账户加进去，一行一个，我们加上ftp，防止它登录到系统" class="headerlink" title="3.7  然后在/etc下创建vsftpd.chroot_list文件，里面把我们要限制的本地账户加进去，一行一个，我们加上ftp，防止它登录到系统"></a>3.7  然后在/etc下创建vsftpd.chroot_list文件，里面把我们要限制的本地账户加进去，一行一个，我们加上ftp，防止它登录到系统</h4><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/3-7.png" alt="3-7"></p>
<h4 id="3-8-隐藏文件真实的所有用户和组信息，防止黑客拿下ftp后查看更多系统用户信息"><a href="#3-8-隐藏文件真实的所有用户和组信息，防止黑客拿下ftp后查看更多系统用户信息" class="headerlink" title="3.8 隐藏文件真实的所有用户和组信息，防止黑客拿下ftp后查看更多系统用户信息"></a>3.8 隐藏文件真实的所有用户和组信息，防止黑客拿下ftp后查看更多系统用户信息</h4><pre><code>hide_ids=YES
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/3-8.png" alt="3-8"></p>
<h4 id="3-9-取消ls-R命令，节省资源，因为使用该命令，在文件列表很多的时候将浪费大量系统资源"><a href="#3-9-取消ls-R命令，节省资源，因为使用该命令，在文件列表很多的时候将浪费大量系统资源" class="headerlink" title="3.9 取消ls -R命令，节省资源，因为使用该命令，在文件列表很多的时候将浪费大量系统资源"></a>3.9 取消ls -R命令，节省资源，因为使用该命令，在文件列表很多的时候将浪费大量系统资源</h4><pre><code>ls_recurse_enable=NO
local_umask=022
write_enable=YES
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/3-9.png" alt="3-9"></p>
<h4 id="3-10-打开日志功能同时设置日志的目录，启用详细的日志记录格式"><a href="#3-10-打开日志功能同时设置日志的目录，启用详细的日志记录格式" class="headerlink" title="3.10 打开日志功能同时设置日志的目录，启用详细的日志记录格式"></a>3.10 打开日志功能同时设置日志的目录，启用详细的日志记录格式</h4><pre><code>xferlog_enable=YES
xferlog_file=/var/log/vsftpd.log
xferlog_enable=YES
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/3-10.png" alt="3-10"></p>
<h4 id="3-11-如果打开虚用户功能等，那么建议关闭本地用户登录"><a href="#3-11-如果打开虚用户功能等，那么建议关闭本地用户登录" class="headerlink" title="3.11 如果打开虚用户功能等，那么建议关闭本地用户登录"></a>3.11 如果打开虚用户功能等，那么建议关闭本地用户登录</h4><pre><code>local_enable=NO
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/3-11.png" alt="3-11"></p>
<h2 id="【思考】"><a href="#【思考】" class="headerlink" title="【思考】"></a>【思考】</h2><p><strong>缺省安装额mysql有密码吗？</strong></p>
<p>答：没有</p>
<h1 id="（二）备份和恢复"><a href="#（二）备份和恢复" class="headerlink" title="（二）备份和恢复"></a>（二）备份和恢复</h1><h2 id="【原理】-1"><a href="#【原理】-1" class="headerlink" title="【原理】"></a>【原理】</h2><p>​    备份是最简单的保护数据的方法，本文介绍多种备份方法。为了得到一个一致的备份，在相关的表上做一个<strong>lock tables</strong>，你只需要一个读锁定，当你在数据库目录中做文件的一个拷贝时，这允许其他线程继续查询该表；当你恢复数据时，需要一个写锁定，以避免冲突</p>
<h2 id="【步骤】-1"><a href="#【步骤】-1" class="headerlink" title="【步骤】"></a>【步骤】</h2><h3 id="一、使用SQL语句备份和恢复"><a href="#一、使用SQL语句备份和恢复" class="headerlink" title="一、使用SQL语句备份和恢复"></a>一、使用SQL语句备份和恢复</h3><p>你可以使用<strong>select into outfile</strong>语句进行备份，并使用<strong>load data infile</strong>语句恢复数据</p>
<p>这种方法只能导出数据的内容，不包括表的结构，如果表的结构文件损坏，你必须要先恢复原来的表的结构</p>
<p>语法：</p>
<pre><code>select * into {outfile|dumpfile} &#39;file_name&#39; from table_name

load data [low_priority][local] infile &#39;file_name&#39; [replace|ignore] into table table_name
</code></pre><p><strong>select … into outfile ‘file_name’</strong>格式的select语句将选择的行写入一个文件。文件在服务器主机上被创建，并且不能是已经存在的（这可以阻止数据库表和文件例如“/etc/passwd”被破坏）。<strong>select … into outfile</strong>是<strong>load data infile</strong>的逆操作</p>
<p><strong>load data infile</strong>语句从一个文本文件中以很高的速度读入一个表中。如果指定<strong>local</strong>关键词，从客户主机读取文件；如果未指定<strong>local</strong>关键词，文件必须位于服务器上（local关键词在Mysql3.22.6或以后版本中可用）</p>
<p>为了安全原因，当读取位于服务器上的文本文件时，文件必须处于数据库目录或可被所有人读取。另外，为了对服务器上文件使用load data infile，在服务器主机上必须有file的权限。使用select into outfile语句，在服务器主机上必须有file权限</p>
<p>为了避免重复记录，在表中需要一个primary key或unique索引。当在唯一索引值上一个新纪录与一个老记录重复时，<strong>replace</strong>关键词使得老记录用一个新纪录代替。如果指定<strong>ignore</strong>，跳过有唯一索引的现有行的重复行的输入。如果不指定任何一个选项，当找到重复索引值时，出现一个错误，并且文本文件的余下部分被忽略。</p>
<p>如果指定关键词<strong>low_priority</strong>，<strong>load data</strong>语句的执行被推知道没有其他客户读取表之后</p>
<p>使用<strong>local</strong>将比让服务器直接存取文件慢些，因为文件的内容必须从客户主机传送到服务器主机。在另一方面，不需要file权限装载本地文件。如果使用<strong>local</strong>关键词从一个本地文件装在数据，服务器没有办法在操作的当中停止文件的传输，因此缺省的行为好像<strong>ignore</strong>被指定一样</p>
<p>当在服务器主机上寻找文件时，服务器使用下列规则：</p>
<pre><code>如果给出一个绝对路径名，服务器使用该路径名
如果给出一个有一个或多个前置部件的相对路径名，服务器相对服务器的数据目录搜索文件
如果给出一个没有前置部件的一个文件名，服务器在当前数据库的数据库目录寻找文件
</code></pre><h4 id="1-1-启动mysql服务-1"><a href="#1-1-启动mysql服务-1" class="headerlink" title="1.1 启动mysql服务"></a>1.1 启动mysql服务</h4><pre><code>service mysqld restart
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D/1-1.png" alt="1-1"></p>
<h4 id="1-2-创建账号密码"><a href="#1-2-创建账号密码" class="headerlink" title="1.2 创建账号密码"></a>1.2 创建账号密码</h4><pre><code>mysqladmin -u root -p password &#39;123456&#39;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D/1-2.png" alt="1-2"></p>
<h4 id="1-3-进入mysql"><a href="#1-3-进入mysql" class="headerlink" title="1.3 进入mysql"></a>1.3 进入mysql</h4><pre><code>mysql -u root -p
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D/1-3.png" alt="1-3"></p>
<h4 id="1-4-创建数据库db"><a href="#1-4-创建数据库db" class="headerlink" title="1.4 创建数据库db"></a>1.4 创建数据库db</h4><pre><code>create database db;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D/1-4.png" alt="1-4"></p>
<h4 id="1-5-使用数据库db"><a href="#1-5-使用数据库db" class="headerlink" title="1.5 使用数据库db"></a>1.5 使用数据库db</h4><pre><code>use db;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D/1-5.png" alt="1-5"></p>
<h4 id="1-6-创建数据表"><a href="#1-6-创建数据表" class="headerlink" title="1.6 创建数据表"></a>1.6 创建数据表</h4><pre><code>create table tbl_name(a int);
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D/1-6.png" alt="1-6"></p>
<h4 id="1-7-锁定数据表，避免在备份过程中，表被更新"><a href="#1-7-锁定数据表，避免在备份过程中，表被更新" class="headerlink" title="1.7 锁定数据表，避免在备份过程中，表被更新"></a>1.7 锁定数据表，避免在备份过程中，表被更新</h4><pre><code>lock tables tbl_name read;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D/1-7.png" alt="1-7"></p>
<h4 id="1-8-导出数据"><a href="#1-8-导出数据" class="headerlink" title="1.8 导出数据"></a>1.8 导出数据</h4><pre><code>select * into outfile &#39;tbl_name.bak&#39; from tbl_name;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D/1-8.png" alt="1-8"></p>
<h4 id="1-9-解锁表"><a href="#1-9-解锁表" class="headerlink" title="1.9 解锁表"></a>1.9 解锁表</h4><pre><code>unlock tables;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D/1-9.png" alt="1-9"></p>
<h3 id="二、数据库备份的导入"><a href="#二、数据库备份的导入" class="headerlink" title="二、数据库备份的导入"></a>二、数据库备份的导入</h3><h4 id="2-1-为表增加一个锁定"><a href="#2-1-为表增加一个锁定" class="headerlink" title="2.1 为表增加一个锁定"></a>2.1 为表增加一个锁定</h4><pre><code>lock tables tbl_name write;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D/2-1.png" alt="2-1"></p>
<h4 id="2-2-导入备份数据"><a href="#2-2-导入备份数据" class="headerlink" title="2.2 导入备份数据"></a>2.2 导入备份数据</h4><pre><code>load data infile &#39;tbl_name.bak&#39; replace into table tbl_name;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D/2-2.png" alt="2-2"></p>
<h4 id="2-3-low-priority关键字"><a href="#2-3-low-priority关键字" class="headerlink" title="2.3 low_priority关键字"></a>2.3 low_priority关键字</h4><p>指定一个<strong>low_priority</strong>关键字，就不必对表锁定，因为数据的导入将被推迟到没有客户读表为止</p>
<pre><code>load data low_priority infile &#39;tbl_name.bak&#39; replace into table tbl_name;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D/2-3.png" alt="2-3"></p>
<h4 id="2-4-解锁表"><a href="#2-4-解锁表" class="headerlink" title="2.4 解锁表"></a>2.4 解锁表</h4><pre><code>unlock tables;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D/2-4.png" alt="2-4"></p>
<h3 id="三、使用mysqlimport恢复数据"><a href="#三、使用mysqlimport恢复数据" class="headerlink" title="三、使用mysqlimport恢复数据"></a>三、使用mysqlimport恢复数据</h3><p>为了恢复数据完全没有必要在客户机中执行SQL语句，因为你可以简单的使用mysqlimport程序</p>
<h4 id="3-1-创建db1，建表tbl1，插入三组数据"><a href="#3-1-创建db1，建表tbl1，插入三组数据" class="headerlink" title="3.1 创建db1，建表tbl1，插入三组数据"></a>3.1 创建db1，建表tbl1，插入三组数据</h4><pre><code>create database db1;
use db1;
create table tbl1(a int);
insert tbl1 values(1);
insert tbl1 values(2);
insert tbl1 values(3);
select * from tbl1;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D/3-1.png" alt="3-1"></p>
<h4 id="3-2-对表tbl1进行备份"><a href="#3-2-对表tbl1进行备份" class="headerlink" title="3.2 对表tbl1进行备份"></a>3.2 对表tbl1进行备份</h4><pre><code>select * into outfile &#39;tbl1.bak&#39; from tbl1;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D/3-2.png" alt="3-2"></p>
<h4 id="3-3-删除tbl1"><a href="#3-3-删除tbl1" class="headerlink" title="3.3 删除tbl1"></a>3.3 删除tbl1</h4><pre><code>detele from tbl1;
select * from tbl1;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D/3-3.png" alt="3-3"></p>
<h4 id="3-4-恢复tbl1并进入查看结果"><a href="#3-4-恢复tbl1并进入查看结果" class="headerlink" title="3.4 恢复tbl1并进入查看结果"></a>3.4 恢复tbl1并进入查看结果</h4><p><strong>注意</strong>：这里的<strong>-p</strong>之后没有加<strong>空格</strong></p>
<pre><code>exit
mysqlimport -p123456 --lock-tables --replace db1 tbl1.bak
mysqladmin -p123456
use db1;
select * from tbl1;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D/3-4.png" alt="3-4"></p>
<h4 id="3-5-low-priority选项"><a href="#3-5-low-priority选项" class="headerlink" title="3.5 low_priority选项"></a>3.5 low_priority选项</h4><pre><code>mysqlimport -p123456 --low-priority --replace db1 tbl1.bak
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D/3-5.png" alt="3-5"></p>
<h4 id="3-6-如果为远程的服务器恢复数据，可以如此"><a href="#3-6-如果为远程的服务器恢复数据，可以如此" class="headerlink" title="3.6 如果为远程的服务器恢复数据，可以如此"></a>3.6 如果为远程的服务器恢复数据，可以如此</h4><pre><code>mysqlimport -p123456 -C --lock-tables --replace db1 tbll.bak
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D/3-6.png" alt="3-6"></p>
<hr>
<h3 id="四、使用mysqldump备份数据"><a href="#四、使用mysqldump备份数据" class="headerlink" title="四、使用mysqldump备份数据"></a>四、使用mysqldump备份数据</h3><p>同mysqlimport一样，也存在一个工具mysqldump备份数据，但是它比SQL语句多做的工作是可以在导出的文件中包括SQL语句，因此可以备份数据库表的结构，而且可以备份一个数据库，甚至整个数据库系统</p>
<pre><code>mysqldump [options] database [tables]
mysqldump [options] --databases [options] DB1 [DB2 DB3 ...]
mysqldump [options] --all-databases [options]
</code></pre><p>如果不给定任何表，整个数据库将被倾倒。可以执行mysqldump –help可以得到mysqldump的版本支持选项表</p>
<h4 id="4-1-备份数据库的方法，服务器主机上备份数据库db1"><a href="#4-1-备份数据库的方法，服务器主机上备份数据库db1" class="headerlink" title="4.1 备份数据库的方法，服务器主机上备份数据库db1"></a>4.1 备份数据库的方法，服务器主机上备份数据库db1</h4><pre><code>mysqldump db1 -p123456
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D/4-1.png" alt="4-1"></p>
<h4 id="4-2-备份过程及结果"><a href="#4-2-备份过程及结果" class="headerlink" title="4.2 备份过程及结果"></a>4.2 备份过程及结果</h4><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D/4-2.png" alt="4-2"></p>
<h4 id="4-3-定向标准输出"><a href="#4-3-定向标准输出" class="headerlink" title="4.3 定向标准输出"></a>4.3 定向标准输出</h4><p>mysqldump缺省时把输出定位到标准输出，需要重定向标准输出。把数据库备份到db1.bak中</p>
<pre><code>mysqldump -u root -p123456 db1 &gt; db1.bak
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D/4-3.png" alt="4-3"></p>
<h4 id="4-4-备份数据表"><a href="#4-4-备份数据表" class="headerlink" title="4.4 备份数据表"></a>4.4 备份数据表</h4><pre><code>mysqldump -u root -p123456 --tables db1 tbl1 &gt; tbl1.bak
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D/4-4.png" alt="4-4"></p>
<h4 id="4-5-备份整个数据库系统"><a href="#4-5-备份整个数据库系统" class="headerlink" title="4.5 备份整个数据库系统"></a>4.5 备份整个数据库系统</h4><p>也可以备份整个数据库系统的拷贝，不过对于一个庞大的系统，这样做没什么实际的价值</p>
<pre><code>mysqldump -u root -p123456 --all-database &gt; db.bak
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D/4-5.png" alt="4-5"></p>
<hr>
<h3 id="五、有关生成SQL语句的优化控制"><a href="#五、有关生成SQL语句的优化控制" class="headerlink" title="五、有关生成SQL语句的优化控制"></a>五、有关生成SQL语句的优化控制</h3><p><strong>–add-locks</strong>生成的SQL语句中，在每个表数据恢复之前增加lock tables并且之后unlock tables（为了使得更快的插入到mysql）。</p>
<p><strong>–add-drop-table</strong>生成得SQL语句中，在每个create语句之前增加一个drop table</p>
<p><strong>-e，–extended-insert</strong>使得全新多行insert语法（给出更紧缩并且更快的插入语句）</p>
<p><strong>-l，–lock-tables</strong>为开始导出数据前，读锁定所有涉及的表</p>
<p><strong>-q，–quick</strong>不缓冲查询，直接倾倒至stdout</p>
<p><strong>–opt</strong>选项，它会是上述所有选项有效</p>
<h4 id="5-1-备份单个数据库或表"><a href="#5-1-备份单个数据库或表" class="headerlink" title="5.1 备份单个数据库或表"></a>5.1 备份单个数据库或表</h4><pre><code>create db2;
exit;

mysqldump -u root -p123456 --opt db1 &gt; db1.txt
mysqldump -u root -p123456 --opt db1 &gt; db1.sql
mysql db2 &lt; db1.sql -p123456
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D/5-1.png" alt="5-1"></p>
<h4 id="5-2-不必指定数据库"><a href="#5-2-不必指定数据库" class="headerlink" title="5.2 不必指定数据库"></a>5.2 不必指定数据库</h4><p>如果使用<strong>–database</strong>或者<strong>–all-database</strong>选项，由于导出文件中已经包含创建和选用数据库的语句，可以直接使用，不必指定数据库</p>
<pre><code>mysqldump -u root -p123456 --database db1 &gt; db1.sql
mysql -u root -p123456 &lt; db1.sql
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D/5-2.png" alt="5-2"></p>
<h2 id="【思考】-1"><a href="#【思考】-1" class="headerlink" title="【思考】"></a>【思考】</h2><p><strong>出现access denied for user ‘root‘@’localhost’ (using password:no)</strong>该错误是什么原因？</p>
<p>答：很巧，前面我在使用mysqldump备份单个数据库时，由于密码输出，出现了如下提示</p>
<pre><code>access denied for user &#39;root&#39;@&#39;localhost&#39; (using password:YES)
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D/6.png" alt="6"></p>
<p>这是有输入密码的，但是密码出错了。所以可以猜测题目这个报错是由于：<strong>没有输入密码</strong></p>
<h1 id="（三）字符串模式匹配"><a href="#（三）字符串模式匹配" class="headerlink" title="（三）字符串模式匹配"></a>（三）字符串模式匹配</h1><h2 id="【原理】-2"><a href="#【原理】-2" class="headerlink" title="【原理】"></a>【原理】</h2><p>SQL的模式匹配允许你使用<strong>“_”</strong>匹配任何单个字符，而<strong>“%”</strong>匹配任何数据字符</p>
<h2 id="【步骤】-2"><a href="#【步骤】-2" class="headerlink" title="【步骤】"></a>【步骤】</h2><h3 id="一、环境构建"><a href="#一、环境构建" class="headerlink" title="一、环境构建"></a>一、环境构建</h3><h4 id="1-1-启动mysql服务-2"><a href="#1-1-启动mysql服务-2" class="headerlink" title="1.1 启动mysql服务"></a>1.1 启动mysql服务</h4><pre><code>service mysqld restart
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/1-1.png" alt="1-1"></p>
<h4 id="1-2-进入mysql"><a href="#1-2-进入mysql" class="headerlink" title="1.2 进入mysql"></a>1.2 进入mysql</h4><pre><code>mysql
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/1-2.png" alt="1-2"></p>
<h4 id="1-3-创建mytest数据库"><a href="#1-3-创建mytest数据库" class="headerlink" title="1.3 创建mytest数据库"></a>1.3 创建mytest数据库</h4><pre><code>create database mytest;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/1-3.png" alt="1-3"></p>
<h4 id="1-4-使用mytest"><a href="#1-4-使用mytest" class="headerlink" title="1.4 使用mytest"></a>1.4 使用mytest</h4><pre><code>use mytest;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/1-4.png" alt="1-4"></p>
<h4 id="1-5-建立student表创建一个表并添加内容"><a href="#1-5-建立student表创建一个表并添加内容" class="headerlink" title="1.5 建立student表创建一个表并添加内容"></a>1.5 建立student表创建一个表并添加内容</h4><pre><code>create table student (name varchar(10),teacher varchar(10),age int,sex varchar(10),sno varchar(20));

insert into student (name,teacher,age,sex,sno) values (&#39;wanglin&#39;,&#39;jake&#39;,&#39;20&#39;,&#39;woman&#39;,&#39;201902&#39;);
insert into student (name,teacher,age,sex,sno) values (&#39;liming&#39;,&#39;tony&#39;,&#39;22&#39;,&#39;man&#39;,&#39;201903&#39;);
insert into student (name,teacher,age,sex,sno) values (&#39;fang&#39;,&#39;tony&#39;,&#39;22&#39;,&#39;woman&#39;,&#39;201904&#39;);
insert into student (name,teacher,age,sex,sno) values (&#39;limeng&#39;,&#39;benny&#39;,&#39;23&#39;,&#39;women&#39;,&#39;201905&#39;);
insert into student (name,teacher,age,sex,sno) values (&#39;liuhu&#39;,&#39;benny&#39;,&#39;23&#39;,&#39;woman&#39;,&#39;201906&#39;);

select * from student;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/1-5.png" alt="1-5"></p>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/1-5-2.png" alt="1-5-2"></p>
<h3 id="二、标准的SQL模式匹配"><a href="#二、标准的SQL模式匹配" class="headerlink" title="二、标准的SQL模式匹配"></a>二、标准的SQL模式匹配</h3><h4 id="2-1-在表student中，找”l”开头的名字"><a href="#2-1-在表student中，找”l”开头的名字" class="headerlink" title="2.1 在表student中，找”l”开头的名字"></a>2.1 在表student中，找”l”开头的名字</h4><pre><code>select * from student where name like &quot;l%&quot;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/2-1.png" alt="2-1"></p>
<h4 id="2-2-找出以”u”结尾的名字"><a href="#2-2-找出以”u”结尾的名字" class="headerlink" title="2.2 找出以”u”结尾的名字"></a>2.2 找出以”u”结尾的名字</h4><pre><code>select * from student where name like &quot;%u&quot;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/2-2.png" alt="2-2"></p>
<h4 id="2-3-找出包含一个”u”的名字"><a href="#2-3-找出包含一个”u”的名字" class="headerlink" title="2.3 找出包含一个”u”的名字"></a>2.3 找出包含一个”u”的名字</h4><pre><code>select * from student where name like &quot;%u%&quot;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/2-3.png" alt="2-3"></p>
<h4 id="2-4-使用”-”字符，找出包含正好5个字符的名字"><a href="#2-4-使用”-”字符，找出包含正好5个字符的名字" class="headerlink" title="2.4 使用”_”字符，找出包含正好5个字符的名字"></a>2.4 使用”_”字符，找出包含正好5个字符的名字</h4><pre><code>select * from student where name like &quot;_____&quot;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/2-4.png" alt="2-4"></p>
<h3 id="三、扩展正则表达式模式匹配"><a href="#三、扩展正则表达式模式匹配" class="headerlink" title="三、扩展正则表达式模式匹配"></a>三、扩展正则表达式模式匹配</h3><p><strong>“.”</strong>匹配任何单个的字符，一个字符类<strong>“[…]”</strong>匹配在方括号内的任何字符，例如，<strong>“[abc]”</strong>匹配”a”、”b”或”c”。</p>
<p><strong>“-“</strong>为了命名字符的一个范围，<strong>“[a-z]”</strong>匹配任何小写字母，而<strong>“[0-9]”</strong>匹配任何数字</p>
<p><strong>“*”</strong>匹配零个或多个在它前面的东西，例如<strong>“X*”</strong>匹配任何数量的”X”字符，”[0-9]*”匹配任何数量的数字</p>
<p>而<strong>“.*”</strong>匹配任何数量的任何东西</p>
<p>正在表达式是区分大小写的，但是如果你希望，你能使用一个字符类匹配两种写法：例如，<strong>“[a^]”</strong>匹配小写或大写的”a”而<strong>“[a z^Z]”</strong>匹配两种写法的任何字母</p>
<p>如果它出现在被测试值得任何地方，模式就匹配（只要他们匹配整个值，SQL模式匹配）。为了定位一个模式以便它必须匹配被测试值得开始或结尾，在模式开始处使用<strong>“^”</strong>或在模式得结尾用<strong>“$”</strong></p>
<p>为了说明扩展正则表达式如何工作，上面所示得LIKE查询在下面使用<strong>Regexp</strong>重写</p>
<h4 id="3-1-找出”l”开头的名字"><a href="#3-1-找出”l”开头的名字" class="headerlink" title="3.1 找出”l”开头的名字"></a>3.1 找出”l”开头的名字</h4><p>使用<strong>“^”</strong>匹配名字的开始并且<strong>“[lL]”</strong>匹配小写或大写的”l”</p>
<pre><code>select * from student where name regexp &quot;^[lL]&quot;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/3-1.png" alt="3-1"></p>
<h4 id="3-2-找出以”u”结尾的名字"><a href="#3-2-找出以”u”结尾的名字" class="headerlink" title="3.2 找出以”u”结尾的名字"></a>3.2 找出以”u”结尾的名字</h4><p>使用<strong>“$”</strong>匹配名字的结尾</p>
<pre><code>select * from student where name regexp &quot;[u$]&quot;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/3-2.png" alt="3-2"></p>
<h4 id="3-3-找出包含一个”e”的名字"><a href="#3-3-找出包含一个”e”的名字" class="headerlink" title="3.3 找出包含一个”e”的名字"></a>3.3 找出包含一个”e”的名字</h4><p>使用<strong>“[eE]”</strong>匹配小写或大写的<strong>“e”</strong></p>
<pre><code>select * from student where name regexp &quot;[eE]&quot;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/3-3.png" alt="3-3"></p>
<h4 id="3-4-找出包含正好5个字符的名字"><a href="#3-4-找出包含正好5个字符的名字" class="headerlink" title="3.4 找出包含正好5个字符的名字"></a>3.4 找出包含正好5个字符的名字</h4><p>利用通配符进行模糊匹配，使用<strong>“^”</strong>和<strong>“$”</strong>匹配名字的开始和结尾，和5个<strong>“.”</strong>事例在两者之间</p>
<pre><code>select * from student where name regexp &quot;[^.....$]&quot;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/3-4.png" alt="3-4"></p>
<h4 id="3-5-使用”-n-”-“重复n次”操作符重写先前的查询"><a href="#3-5-使用”-n-”-“重复n次”操作符重写先前的查询" class="headerlink" title="3.5 使用”{n}”   “重复n次”操作符重写先前的查询"></a>3.5 使用”{n}”   “重复n次”操作符重写先前的查询</h4><pre><code>select * from student where name regexp &quot;[^.{5}$]&quot;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/3-5.png" alt="3-5"></p>
<h3 id="四、列的别名"><a href="#四、列的别名" class="headerlink" title="四、列的别名"></a>四、列的别名</h3><p>精选输出的列可以用列名、列别名或列位置在order by和group by子句引用，列位置从1开始。例如，我们从student表中检索出姓名和年宁，直接引用列名</p>
<h4 id="4-1-直接引用列名"><a href="#4-1-直接引用列名" class="headerlink" title="4.1 直接引用列名"></a>4.1 直接引用列名</h4><pre><code>delete from student where name=&quot;wanglin&quot;;
delete from student where name=&quot;fang&quot;;
select name,age from student order by name,age;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/4-1.png" alt="4-1"></p>
<h4 id="4-2-在子句中使用列的位置"><a href="#4-2-在子句中使用列的位置" class="headerlink" title="4.2 在子句中使用列的位置"></a>4.2 在子句中使用列的位置</h4><p>这句语句的输出与上面并没有不同</p>
<pre><code>select name,age from student order by 1,2;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/4-2.png" alt="4-2"></p>
<h4 id="4-3-为列命名"><a href="#4-3-为列命名" class="headerlink" title="4.3 为列命名"></a>4.3 为列命名</h4><pre><code>select name as n,age as a from student order by n,a;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/4-3.png" alt="4-3"></p>
<p>返回的记录顺序并无不同，但是列的名字有了变化，这一点在使用create table … select 语句创建表时是有意义的。例如，我们想从pet表生成包括其中name,owner字段的表，但是想把name和owner字段的名字重新命名为animal和child，一个很笨的方法就是创建表再录入数据，如果使用别名，则仅仅一条SQL语句就可以解决：</p>
<h4 id="4-4-使用create-table-select"><a href="#4-4-使用create-table-select" class="headerlink" title="4.4 使用create table select"></a>4.4 使用create table select</h4><pre><code>create table newstudent select name as newname,teacher as newteacher from student;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/4-4.png" alt="4-4"></p>
<h4 id="4-5-检索生成的表"><a href="#4-5-检索生成的表" class="headerlink" title="4.5 检索生成的表"></a>4.5 检索生成的表</h4><pre><code>select * from newstudent;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/4-5.png" alt="4-5"></p>
<h3 id="五、表的别名"><a href="#五、表的别名" class="headerlink" title="五、表的别名"></a>五、表的别名</h3><p>别名不仅可以应用于列，也可以引用于表名，具体方法类似于列的别名，这里不再重复。列的别名经常用于表自身的连接中。你不必有2个不同的表来执行一个联结。如果你想要将一个表的记录与同一个表的其他记录进行比较，联结一个表到自身有时是有用的</p>
<h4 id="5-1-联结表自身"><a href="#5-1-联结表自身" class="headerlink" title="5.1 联结表自身"></a>5.1 联结表自身</h4><pre><code>select s1.name,s1.sex,s2.name,s2.sex,s1.teacher from student as s1,student as s2 where s1.teacher=s2.teacher and s1.sex=&quot;man&quot; and s2.sex=&quot;woman&quot;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/5-1.png" alt="5-1"></p>
<p>在这个查询中，我们为表名指定别名以便能引用列并且使得每一个列引用关联于哪个表实力更直观</p>
<h3 id="六、取出互不相同的记录"><a href="#六、取出互不相同的记录" class="headerlink" title="六、取出互不相同的记录"></a>六、取出互不相同的记录</h3><p>有时候你可能希望取出的数据互不重复，因为重复的数据可能对你没有意义。解决的办法是使用<strong>Distinct</strong>关键字，使用这个关键字保证结果集中不包括重复的记录，也就是说，你取出的记录中，没有重复的行</p>
<h4 id="6-1-取出student表中benny所指导的学生的记录"><a href="#6-1-取出student表中benny所指导的学生的记录" class="headerlink" title="6.1 取出student表中benny所指导的学生的记录"></a>6.1 取出student表中benny所指导的学生的记录</h4><pre><code>select name,teacher,age,sex from student where teacher = &quot;benny&quot;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/6-1.png" alt="6-1"></p>
<p>注意上面的结果，因为我们要使用它</p>
<h4 id="6-2-指定Distinct关键字"><a href="#6-2-指定Distinct关键字" class="headerlink" title="6.2 指定Distinct关键字"></a>6.2 指定Distinct关键字</h4><pre><code>select distinct name,age,sex from student where teacher = &quot;benny&quot;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/6-2.png" alt="6-2"></p>
<h4 id="6-3-修改作比较"><a href="#6-3-修改作比较" class="headerlink" title="6.3 修改作比较"></a>6.3 修改作比较</h4><p>你可以看到有两条结果，这是因为返回的结果集中的行不同，如果我们做以下更改，只返回teacher,sex列，你可以观察变化</p>
<pre><code>select teacher,sex from student where teacher = &quot;benny&quot;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/6-3.png" alt="6-3"></p>
<p><strong>Distinct</strong>关键字的存在，使查询只返回不同的记录行。如果一个表中，有完全相同的行，你可以使用<strong>Distinct</strong>，以去除冗余的输出：</p>
<pre><code>select distinct * from tbl_name;
</code></pre><h3 id="七、NULL值的问题"><a href="#七、NULL值的问题" class="headerlink" title="七、NULL值的问题"></a>七、NULL值的问题</h3><p>概念上，NULL意味着”没有值”或”未知值”，且它被看作有点与众不同的值。为了测试NULL，你不能使用算法比较运算符例如=、&lt;或!=</p>
<h4 id="7-1-不能使用运算符"><a href="#7-1-不能使用运算符" class="headerlink" title="7.1 不能使用运算符"></a>7.1 不能使用运算符</h4><pre><code>select 1 = NULL,1 != NULL,1 &lt; NULL,1 &gt; NULL；
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/7-1.png" alt="7-1"></p>
<p>很清楚，这些结果的比较中毫无意义</p>
<h4 id="7-2-使用IS-NULL和IS-NOT-NULL操作符"><a href="#7-2-使用IS-NULL和IS-NOT-NULL操作符" class="headerlink" title="7.2 使用IS NULL和IS NOT NULL操作符"></a>7.2 使用IS NULL和IS NOT NULL操作符</h4><pre><code>select 1 IS NULL,1 IS NOT NULL;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/7-2.png" alt="7-2"></p>
<p>这说明在Mysql中，0意味着假而1意味着真</p>
<h4 id="7-3-使用NULL"><a href="#7-3-使用NULL" class="headerlink" title="7.3 使用NULL"></a>7.3 使用NULL</h4><p>NULL这样特殊的处理是为什么，例如，可以只查看在学校有学号的同学</p>
<pre><code>select * from student where sno is not null;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/7-3.png" alt="7-3"></p>
<h4 id="7-4-NULL值的概念"><a href="#7-4-NULL值的概念" class="headerlink" title="7.4 NULL值的概念"></a>7.4 NULL值的概念</h4><p>NULL值的概念是造成SQL的新手的混淆的普遍原因，他们经常认为NULL是和一个空字符串’’的一样的东西。但并不是这样的，例如，下列语句是完全不同的</p>
<pre><code>create table my_table(phone varchar(20));
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/7-4.png" alt="7-4"></p>
<h4 id="7-5-插入NULL值并查看"><a href="#7-5-插入NULL值并查看" class="headerlink" title="7.5 插入NULL值并查看"></a>7.5 插入NULL值并查看</h4><pre><code>insert into my_table (phone) values (NULL);

select * from my_table;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/7-5.png" alt="7-5"></p>
<h4 id="7-6-删除这行数据"><a href="#7-6-删除这行数据" class="headerlink" title="7.6 删除这行数据"></a>7.6 删除这行数据</h4><pre><code>delete from my_table where phone is null;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/7-6.png" alt="7-6"></p>
<h4 id="7-7-插入空字符串并查看"><a href="#7-7-插入空字符串并查看" class="headerlink" title="7.7 插入空字符串并查看"></a>7.7 插入空字符串并查看</h4><pre><code>insert into my_table (phone) values (&quot;&quot;);

select * from my_table
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/7-7.png" alt="7-7"></p>
<p>两个语句把值插入到phone列，但是第一个插入一个<strong>NULL</strong>值而第二个插入一个<strong>空字符串</strong>。第一个的含义可以认为是”电话号码不知道”，而第二个则可意味着”她没有电话”</p>
<h4 id="7-8-关于NULL值的比较"><a href="#7-8-关于NULL值的比较" class="headerlink" title="7.8 关于NULL值的比较"></a>7.8 关于NULL值的比较</h4><p>在SQL中，NULL值在与任何其他值甚至NULL值比较时总是假的（FALSE）。包含NULL的一个表达式总是产生一个NULL值，除非在包含在表达式中的运算符和函数的文档中指出</p>
<pre><code>select NULL,1+NULL,concat(&#39;invisible&#39;,NULL);
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/7-8.png" alt="7-8"></p>
<h4 id="7-9-如果你想要寻找值是NULL的列，你不能使用-NULL测试"><a href="#7-9-如果你想要寻找值是NULL的列，你不能使用-NULL测试" class="headerlink" title="7.9 如果你想要寻找值是NULL的列，你不能使用=NULL测试"></a>7.9 如果你想要寻找值是NULL的列，你不能使用=NULL测试</h4><p>下面语句不返回任何行，因为对任何表达式，expr=NULL都是假的</p>
<pre><code>select * from my_table where phone = NULL;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/7-9.png" alt="7-9"></p>
<h4 id="7-10-想要寻找NULL值，必须使用IS-NULL测试"><a href="#7-10-想要寻找NULL值，必须使用IS-NULL测试" class="headerlink" title="7.10 想要寻找NULL值，必须使用IS NULL测试"></a>7.10 想要寻找NULL值，必须使用IS NULL测试</h4><pre><code>insert into my_table (phone) values (NULL);

select * from my_table where phone is NULL;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/7-10.png" alt="7-10"></p>
<h4 id="7-11-寻找空字符串"><a href="#7-11-寻找空字符串" class="headerlink" title="7.11 寻找空字符串"></a>7.11 寻找空字符串</h4><pre><code>select * from my_table where phone = &quot;&quot;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/7-11.png" alt="7-11"></p>
<p>在Mysql中，就像很多其他的SQL服务器一样，你不能索引可以有NULL值得列。你必须声明这样的列为NOT NULL，而且，你不能插入NULL到索引得列中</p>
<p>当使用<strong>order by</strong>使，首先呈现NULL值。如果你用<strong>desc</strong>以降序排序，NULL值最后显示。当使用<strong>group by</strong>时，所有的NULL值被认为是相等的。</p>
<p>为了有助于NULL的处理，你能使用IS NULL和IS NOT NULL运算符和IFNULL()函数</p>
<p>对某些列类型，NULL值被特殊地处理。如果你将NULL插入表地第一个<strong>TIMESTAMP</strong>列，则插入当前的日期和时间。如果你将NULL插入一个<strong>AUTO_INCREMENT</strong>列，则插入顺序中的下一个数字</p>
<h3 id="八、大小写敏感性"><a href="#八、大小写敏感性" class="headerlink" title="八、大小写敏感性"></a>八、大小写敏感性</h3><h4 id="8-1-向表中增添3组数据"><a href="#8-1-向表中增添3组数据" class="headerlink" title="8.1 向表中增添3组数据"></a>8.1 向表中增添3组数据</h4><pre><code>insert my_table values(&#39;13812345678&#39;);
insert my_table values(&#39;13822334455&#39;);
insert my_table values(&#39;13323123123&#39;);
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/8-1.png" alt="8-1"></p>
<h4 id="8-2-查询数据库语句同时使用大小写"><a href="#8-2-查询数据库语句同时使用大小写" class="headerlink" title="8.2 查询数据库语句同时使用大小写"></a>8.2 查询数据库语句同时使用大小写</h4><p>在Mysql中，数据库和表对应于在那些目录下的目录和文件，因而，内在的操作系统的敏感性决定数据库和表命名的大小写的敏感性。这意味着数据库和表名在Unix上是区分大小写的，而在Win32上忽略大小写。</p>
<p>注意：在Win32上，尽管数据库和表名是忽略大小写的，你不应该在同一个查询中使用不同的大小写来引用一个给定的数据库和表。下列查询将不工作，因为它作为my_table和MY_TABLE引用一个表</p>
<pre><code>select * from my_table where MY_TABLE.phone = &#39;13812345678&#39;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/8-2.png" alt="8-2"></p>
<h4 id="8-3-查询数据库语句统一使用小写"><a href="#8-3-查询数据库语句统一使用小写" class="headerlink" title="8.3 查询数据库语句统一使用小写"></a>8.3 查询数据库语句统一使用小写</h4><pre><code>select * from my_table where my_table.phone = &#39;13812345678&#39;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/8-3.png" alt="8-3"></p>
<h4 id="8-4-列名：列名在所有情况下都是忽略大小写的"><a href="#8-4-列名：列名在所有情况下都是忽略大小写的" class="headerlink" title="8.4 列名：列名在所有情况下都是忽略大小写的"></a>8.4 列名：列名在所有情况下都是忽略大小写的</h4><h4 id="8-5-查询表的别名语句同时使用大小写"><a href="#8-5-查询表的别名语句同时使用大小写" class="headerlink" title="8.5 查询表的别名语句同时使用大小写"></a>8.5 查询表的别名语句同时使用大小写</h4><p>表的别名是区分大小写的，下列查询将不工作，因为它用a和A引用别名</p>
<pre><code>select * from my_table as a where a.phone = &#39;13812345678&#39; or A.phone = &#39;13822334455&#39;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/8-5.png" alt="8-5"></p>
<h4 id="8-6-查询表的别名语句统一使用小写"><a href="#8-6-查询表的别名语句统一使用小写" class="headerlink" title="8.6 查询表的别名语句统一使用小写"></a>8.6 查询表的别名语句统一使用小写</h4><pre><code>select * from my_table as a where a.phone = &#39;13812345678&#39; or a.phone = &#39;13822334455&#39;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/8-6.png" alt="8-6"></p>
<h4 id="8-7-列的别名：列的别名是忽略大小写的"><a href="#8-7-列的别名：列的别名是忽略大小写的" class="headerlink" title="8.7 列的别名：列的别名是忽略大小写的"></a>8.7 列的别名：列的别名是忽略大小写的</h4><h4 id="8-8-字符串比较和模式匹配"><a href="#8-8-字符串比较和模式匹配" class="headerlink" title="8.8 字符串比较和模式匹配"></a>8.8 字符串比较和模式匹配</h4><p>缺省地，MySQL搜索是大小写不敏感的（尽管有一些字符集从来不是忽略大小写的，例如捷克语)。这意味着，如果你用col_name LIKE ‘a%’搜寻，你将得到所有以A或a开始的列值。如果你想要使这个搜索大小写敏感，使用像INDEX(col_name,”A”)=0检查一个前缓。或如果列值必须确切是“A”，使用STRCMP(col_name,”A”)=0。</p>
<h4 id="8-9-大小写敏感比较"><a href="#8-9-大小写敏感比较" class="headerlink" title="8.9 大小写敏感比较"></a>8.9 大小写敏感比较</h4><p>简单的比较操作(&gt;=、&gt;、=、&lt;、&lt;=、排序和聚合)是基于每个字符的“排序值”。有同样排序值的字符（E，e)被视为相同的字符！LIKE比较在每个字符的大写值上进行(“E”=”e”)。如果你想要一个列总是被当作大小写敏感的方式，声明它为BINARY</p>
<pre><code>select &quot;E&quot;=&quot;e&quot;,&quot;E&quot;=binary&quot;e&quot;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/8-9.png" alt="8-9"></p>
<h3 id="九、检索语句与多个表的连接"><a href="#九、检索语句与多个表的连接" class="headerlink" title="九、检索语句与多个表的连接"></a>九、检索语句与多个表的连接</h3><h4 id="9-1-创建first表"><a href="#9-1-创建first表" class="headerlink" title="9.1 创建first表"></a>9.1 创建first表</h4><p>SELECT语句不仅可以从单个表中检索数据，也可以通过连接多个表来检索数据。这里将介绍全连接和左连接的作用。我们创建两个表作为例子</p>
<pre><code>create table first (id tinyint,first_name char(10));
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/9-1.png" alt="9-1"></p>
<h4 id="9-2-录入如下数据"><a href="#9-2-录入如下数据" class="headerlink" title="9.2 录入如下数据"></a>9.2 录入如下数据</h4><pre><code>insert first values (&#39;1&#39;,&#39;Tom&#39;);

insert first values (&#39;2&#39;,&#39;Marry&#39;);

insert first values (&#39;2&#39;,&#39;Jarry&#39;);
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/9-2.png" alt="9-2"></p>
<h4 id="9-3-查看结果"><a href="#9-3-查看结果" class="headerlink" title="9.3 查看结果"></a>9.3 查看结果</h4><pre><code>select * from first;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/9-3.png" alt="9-3"></p>
<h4 id="9-4-创建表last"><a href="#9-4-创建表last" class="headerlink" title="9.4 创建表last"></a>9.4 创建表last</h4><pre><code>create table last (id tinyint,last_name char(10));
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/9-4.png" alt="9-4"></p>
<h4 id="9-5-录入数据"><a href="#9-5-录入数据" class="headerlink" title="9.5 录入数据"></a>9.5 录入数据</h4><pre><code>insert last values (&#39;2&#39;,&#39;Stone&#39;);

insert last values (&#39;3&#39;,&#39;White&#39;);

insert last values (&#39;4&#39;,&#39;Donald&#39;);
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/9-5.png" alt="9-5"></p>
<h4 id="9-6-查看结果"><a href="#9-6-查看结果" class="headerlink" title="9.6 查看结果"></a>9.6 查看结果</h4><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/9-6.png" alt="9-6"></p>
<h3 id="十、全连接"><a href="#十、全连接" class="headerlink" title="十、全连接"></a>十、全连接</h3><p>全连接：在检索时指定多个表，将每个表用逗号分隔，这样每个表的数据行都和其他表的每行交叉产生所有可能的组合，这样就是一个全连接。所有可能的组和数即每个表的行数之和。</p>
<h4 id="10-1-观察下面的检索的结果"><a href="#10-1-观察下面的检索的结果" class="headerlink" title="10.1 观察下面的检索的结果"></a>10.1 观察下面的检索的结果</h4><pre><code>select * from first,last;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/10-1.png" alt="10-1"></p>
<p>你可以看到输出的结果集中共有<strong>3×3=9</strong>行，这就是全连接的结果</p>
<h4 id="10-2-更换语句"><a href="#10-2-更换语句" class="headerlink" title="10.2 更换语句"></a>10.2 更换语句</h4><pre><code>select first.*,last.* from first,last;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/10-2.png" alt="10-2"></p>
<p>输出结果与上面的例子相同。记录集的输出的排序是以from子句前的表的顺序进行，既先排列位置靠前的表</p>
<h4 id="10-3-改变记录集中列的显示顺序"><a href="#10-3-改变记录集中列的显示顺序" class="headerlink" title="10.3 改变记录集中列的显示顺序"></a>10.3 改变记录集中列的显示顺序</h4><pre><code>select last.*,first.* from first,last;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/10-3.png" alt="10-3"></p>
<h4 id="10-4-使用where从句限制返回的记录"><a href="#10-4-使用where从句限制返回的记录" class="headerlink" title="10.4 使用where从句限制返回的记录"></a>10.4 使用where从句限制返回的记录</h4><p>上面的例子是两个非常小的表的例子，如果是几个非常大的表的全连接，例如，两个行数分别为1000的表，这样的连接可以产生非常大的结果集合1000×1000=100万行。而实际上你并不需要这么多行的<br>结果，通常你需要使用一个<strong>where</strong>从句来限制返回的记录集的行数</p>
<pre><code>select * from first,last where first.id=last.id;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/10-4.png" alt="10-4"></p>
<h3 id="十一、左连接"><a href="#十一、左连接" class="headerlink" title="十一、左连接"></a>十一、左连接</h3><p>全连接给出<strong>from</strong>子句中所有表都有匹配的行。对于左连接，不仅匹配类似前面的行记录，而且还显示左边的表有而右边的表中无匹配的行。对于这样的行，从右边表选择的列均被显示为NULL。这样，每一匹配的行都从左边的表被选出，而如果右边表有一个匹配的行，则被选中，如果不匹配，行仍然被选中，不过，其中右边相应的列在结果集中均设为NULL。即，<strong>LEFT JOlN</strong>强制包含左边表的每一行，而不管右边表是否匹配</p>
<pre><code>select from table_reference LEFT JOIN table_reference ON conditional_expr
</code></pre><p>其中table_reference为连接的表，<strong>ON</strong>子句后接类似<strong>where</strong>子句的条件</p>
<p>下面我们详细讲述左连接的使用：</p>
<h4 id="11-1-首先，返回一个全连接的结果"><a href="#11-1-首先，返回一个全连接的结果" class="headerlink" title="11.1 首先，返回一个全连接的结果"></a>11.1 首先，返回一个全连接的结果</h4><pre><code>select * from first,last;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/11-1.png" alt="11-1"></p>
<p>注意上面的结果，下面的例子要与这个例子对照</p>
<h4 id="11-2-给出一个限制条件的查询"><a href="#11-2-给出一个限制条件的查询" class="headerlink" title="11.2 给出一个限制条件的查询"></a>11.2 给出一个限制条件的查询</h4><pre><code>select * from first,last where first.id = last.id;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/11-2.png" alt="11-2"></p>
<h4 id="11-3-现在我们给出一个真正的左连接的例子"><a href="#11-3-现在我们给出一个真正的左连接的例子" class="headerlink" title="11.3 现在我们给出一个真正的左连接的例子"></a>11.3 现在我们给出一个真正的左连接的例子</h4><p>你可以仔细观察它的结果，要了解检索的记录顺序</p>
<pre><code>select * from first LEFT JOIN last ON first.id=last.id;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/11-3.png" alt="11-3"></p>
<p>上面的结果，即用左边表的每一行与右边表匹配，如果匹配，则选择到结果集中，如果没有匹配，则结果集中右边表相应的列置为NULL</p>
<h4 id="11-4-进一步理解"><a href="#11-4-进一步理解" class="headerlink" title="11.4 进一步理解"></a>11.4 进一步理解</h4><p>为了进一步理解这一点，我们给出一个有点奇怪的例子</p>
<pre><code>select * from first LEFT JOIN last ON first.id=1;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/11-4.png" alt="11-4"></p>
<p>因为，在结果的最后两行似乎有你不希望的结果。记住，如果只有ON子句的条件，那么左边表的每一行都会返回，只是如果没有匹配的右边表(虽然本例没有约束右边表的列），则记录集中显示为NULL</p>
<h4 id="11-5-加入where子句"><a href="#11-5-加入where子句" class="headerlink" title="11.5 加入where子句"></a>11.5 加入where子句</h4><p>前面只是帮助你理解左连接，下面LEFT JOIN的一些有用的技巧。LEFT JOIN最常见的是与WHERE子句共同使用。使用IS NULL或者IS NOT NULL操作符可以筛选NULL或者非NULL值的列，这是最常见的技巧。列如，选出first.id=last.id的组合，并且别除其中没有右表的匹配记录</p>
<pre><code>select * from first LEFT JOIN last ON first.id=last.id where last.id is not NULL;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/11-5.png" alt="11-5"></p>
<p>你可以看到这样子做的例子结果与下列语句输出结果是相同的</p>
<pre><code>select * from first,last where first.id=last.id;
</code></pre><h4 id="11-6"><a href="#11-6" class="headerlink" title="11.6"></a>11.6</h4><p>又如，检索id值只在左边表出现，而不在右边表出现的记录</p>
<pre><code>select first.* from first LEFT JOIN last ON first.id=last.id where last.id is NULL;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/11-6.png" alt="11-6"></p>
<h4 id="11-7-全连接和左连接的结果集排列顺序是不同的"><a href="#11-7-全连接和左连接的结果集排列顺序是不同的" class="headerlink" title="11.7 全连接和左连接的结果集排列顺序是不同的"></a>11.7 全连接和左连接的结果集排列顺序是不同的</h4><pre><code>select * from first,last where first.id != last.id;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/11-7.png" alt="11-7"></p>
<h4 id="11-8"><a href="#11-8" class="headerlink" title="11.8"></a>11.8</h4><pre><code>select * from first LEFT JOIN last ON first.id != last.id;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/11-8.png" alt="11-8"></p>
<h1 id="（四）集合函数"><a href="#（四）集合函数" class="headerlink" title="（四）集合函数"></a>（四）集合函数</h1><h2 id="【原理】-3"><a href="#【原理】-3" class="headerlink" title="【原理】"></a>【原理】</h2><p>SQL的模式匹配允许你使用<strong>“_”</strong>匹配任何单个字符，而<strong>“%”</strong>匹配任何数据字符</p>
<h2 id="【步骤】-3"><a href="#【步骤】-3" class="headerlink" title="【步骤】"></a>【步骤】</h2><h3 id="一、环境构建-1"><a href="#一、环境构建-1" class="headerlink" title="一、环境构建"></a>一、环境构建</h3><h4 id="1-1-启动mysql服务-3"><a href="#1-1-启动mysql服务-3" class="headerlink" title="1.1 启动mysql服务"></a>1.1 启动mysql服务</h4><pre><code>service mysqld restart
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E9%9B%86%E5%90%88%E5%87%BD%E6%95%B0/1-1.png" alt="1-1"></p>
<h4 id="1-2-进入mysql-1"><a href="#1-2-进入mysql-1" class="headerlink" title="1.2 进入mysql"></a>1.2 进入mysql</h4><pre><code>mysql
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E9%9B%86%E5%90%88%E5%87%BD%E6%95%B0/1-2.png" alt="1-2"></p>
<h4 id="1-3-创建mytest数据库-1"><a href="#1-3-创建mytest数据库-1" class="headerlink" title="1.3 创建mytest数据库"></a>1.3 创建mytest数据库</h4><pre><code>create database mytest;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E9%9B%86%E5%90%88%E5%87%BD%E6%95%B0/1-3.png" alt="1-3"></p>
<h4 id="1-4-使用mytest-1"><a href="#1-4-使用mytest-1" class="headerlink" title="1.4 使用mytest"></a>1.4 使用mytest</h4><pre><code>use mytest;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E9%9B%86%E5%90%88%E5%87%BD%E6%95%B0/1-4.png" alt="1-4"></p>
<h4 id="1-5-创建student表，并添加内容"><a href="#1-5-创建student表，并添加内容" class="headerlink" title="1.5 创建student表，并添加内容"></a>1.5 创建student表，并添加内容</h4><pre><code>create table student (name varchar(10),teacher varchar(10),age int,sex varchar(10),sno varchar(20));

insert into student (name,teacher,age,sex,sno) values (&#39;wanglin&#39;,&#39;jake&#39;,&#39;20&#39;,&#39;woman&#39;,&#39;201902&#39;);
insert into student (name,teacher,age,sex,sno) values (&#39;liming&#39;,&#39;tony&#39;,&#39;22&#39;,&#39;man&#39;,&#39;201903&#39;);
insert into student (name,teacher,age,sex,sno) values (&#39;fang&#39;,&#39;tony&#39;,&#39;22&#39;,&#39;woman&#39;,&#39;201904&#39;);
insert into student (name,teacher,age,sex,sno) values (&#39;limeng&#39;,&#39;benny&#39;,&#39;23&#39;,&#39;women&#39;,&#39;201905&#39;);
insert into student (name,teacher,age,sex,sno) values (&#39;liuhu&#39;,&#39;benny&#39;,&#39;23&#39;,&#39;woman&#39;,&#39;201906&#39;);

select * from student;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E9%9B%86%E5%90%88%E5%87%BD%E6%95%B0/1-5.png" alt="1-5"></p>
<h3 id="二、行列计数"><a href="#二、行列计数" class="headerlink" title="二、行列计数"></a>二、行列计数</h3><h4 id="2-1-使用函数count"><a href="#2-1-使用函数count" class="headerlink" title="2.1 使用函数count(*)"></a>2.1 使用函数count(*)</h4><p>计算查询语句返回的记录行数</p>
<pre><code>select count(*) from student where age=&#39;22&#39;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E9%9B%86%E5%90%88%E5%87%BD%E6%95%B0/2-1.png" alt="2-1"></p>
<h3 id="三、统计字段值的数目"><a href="#三、统计字段值的数目" class="headerlink" title="三、统计字段值的数目"></a>三、统计字段值的数目</h3><h4 id="3-1-计算student表中age列的数目"><a href="#3-1-计算student表中age列的数目" class="headerlink" title="3.1 计算student表中age列的数目"></a>3.1 计算student表中age列的数目</h4><pre><code>select count(age) from student;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E9%9B%86%E5%90%88%E5%87%BD%E6%95%B0/3-1.png" alt="3-1"></p>
<h4 id="3-2-计算age列中特定数字的数目"><a href="#3-2-计算age列中特定数字的数目" class="headerlink" title="3.2 计算age列中特定数字的数目"></a>3.2 计算age列中特定数字的数目</h4><pre><code>select count(age) from student where age=&#39;20&#39;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E9%9B%86%E5%90%88%E5%87%BD%E6%95%B0/3-2.png" alt="3-2"></p>
<h4 id="3-3-使用distinct关键字计算不同年龄的学生数目"><a href="#3-3-使用distinct关键字计算不同年龄的学生数目" class="headerlink" title="3.3 使用distinct关键字计算不同年龄的学生数目"></a>3.3 使用distinct关键字计算不同年龄的学生数目</h4><pre><code>select count(distinct age) from student;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E9%9B%86%E5%90%88%E5%87%BD%E6%95%B0/3-3.png" alt="3-3"></p>
<h4 id="3-4-count-函数配合group-by子句"><a href="#3-4-count-函数配合group-by子句" class="headerlink" title="3.4 count()函数配合group by子句"></a>3.4 count()函数配合group by子句</h4><pre><code>select age,count(*) from student group by age;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E9%9B%86%E5%90%88%E5%87%BD%E6%95%B0/3-4.png" alt="3-4"></p>
<h3 id="四、计算字段的平均值"><a href="#四、计算字段的平均值" class="headerlink" title="四、计算字段的平均值"></a>四、计算字段的平均值</h3><h4 id="4-1"><a href="#4-1" class="headerlink" title="4.1"></a>4.1</h4><h4 id="4-2-计算每个老师带的学生的平均年龄"><a href="#4-2-计算每个老师带的学生的平均年龄" class="headerlink" title="4.2 计算每个老师带的学生的平均年龄"></a>4.2 计算每个老师带的学生的平均年龄</h4><pre><code>select teacher,ave(age) from student group by teacher;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E9%9B%86%E5%90%88%E5%87%BD%E6%95%B0/4-1.png" alt="4-1"></p>
<h3 id="五、计算字段值的和"><a href="#五、计算字段值的和" class="headerlink" title="五、计算字段值的和"></a>五、计算字段值的和</h3><h4 id="5-1"><a href="#5-1" class="headerlink" title="5.1"></a>5.1</h4><h4 id="5-2-计算每个老师带的学生年龄的总和"><a href="#5-2-计算每个老师带的学生年龄的总和" class="headerlink" title="5.2 计算每个老师带的学生年龄的总和"></a>5.2 计算每个老师带的学生年龄的总和</h4><pre><code>select teacher,ave(age) from student group by teacher;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E9%9B%86%E5%90%88%E5%87%BD%E6%95%B0/5-1.png" alt="5-1"></p>
<h3 id="六、计算字段值的极值"><a href="#六、计算字段值的极值" class="headerlink" title="六、计算字段值的极值"></a>六、计算字段值的极值</h3><h4 id="6-1-MAX-和MIN-求极值"><a href="#6-1-MAX-和MIN-求极值" class="headerlink" title="6.1 MAX()和MIN()求极值"></a>6.1 MAX()和MIN()求极值</h4><pre><code>select min(age) from student;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E9%9B%86%E5%90%88%E5%87%BD%E6%95%B0/6-1.png" alt="6-1"></p>
<h4 id="6-2-求每个老师所带学生的最小年龄"><a href="#6-2-求每个老师所带学生的最小年龄" class="headerlink" title="6.2 求每个老师所带学生的最小年龄"></a>6.2 求每个老师所带学生的最小年龄</h4><pre><code>select teacher,min(age) from student group by teacher;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E9%9B%86%E5%90%88%E5%87%BD%E6%95%B0/6-2.png" alt="6-2"></p>
<h4 id="6-3-求每个老师所带学生的最大年龄"><a href="#6-3-求每个老师所带学生的最大年龄" class="headerlink" title="6.3 求每个老师所带学生的最大年龄"></a>6.3 求每个老师所带学生的最大年龄</h4><pre><code>select teacher,max(age) from student group by teacher;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E9%9B%86%E5%90%88%E5%87%BD%E6%95%B0/6-3.png" alt="6-3"></p>
<h1 id="（五）时间函数"><a href="#（五）时间函数" class="headerlink" title="（五）时间函数"></a>（五）时间函数</h1><h2 id="【原理】-4"><a href="#【原理】-4" class="headerlink" title="【原理】"></a>【原理】</h2><p>（1）日期和时间函数对建立一个站点是非常有用的。站点的主人往往对一个表中的数据何时被更新感兴趣。通过日期和时间函数，你可以在秒级跟踪一个表的改变。<br>（2）日期和时间类型是DATETIME、DATE、TIMESTAIMP、TIHME和YEAR。这些的每一个都有合法值的一个范围，而“零”当你指定确买不合法的值时被使用。</p>
<h2 id="【步骤】-4"><a href="#【步骤】-4" class="headerlink" title="【步骤】"></a>【步骤】</h2><h3 id="一、环境构建-2"><a href="#一、环境构建-2" class="headerlink" title="一、环境构建"></a>一、环境构建</h3><h4 id="1-1-启动mysql服务-4"><a href="#1-1-启动mysql服务-4" class="headerlink" title="1.1 启动mysql服务"></a>1.1 启动mysql服务</h4><pre><code>service mysqld restart
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E9%9B%86%E5%90%88%E5%87%BD%E6%95%B0/1-1.png" alt="1-1"></p>
<h4 id="1-2-进入mysql-2"><a href="#1-2-进入mysql-2" class="headerlink" title="1.2 进入mysql"></a>1.2 进入mysql</h4><pre><code>mysql
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E9%9B%86%E5%90%88%E5%87%BD%E6%95%B0/1-2.png" alt="1-2"></p>
<h4 id="1-3-创建mytest数据库-2"><a href="#1-3-创建mytest数据库-2" class="headerlink" title="1.3 创建mytest数据库"></a>1.3 创建mytest数据库</h4><pre><code>create database mytest;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E9%9B%86%E5%90%88%E5%87%BD%E6%95%B0/1-3.png" alt="1-3"></p>
<h4 id="1-4-使用mytest-2"><a href="#1-4-使用mytest-2" class="headerlink" title="1.4 使用mytest"></a>1.4 使用mytest</h4><pre><code>use mytest;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E9%9B%86%E5%90%88%E5%87%BD%E6%95%B0/1-4.png" alt="1-4"></p>
<h4 id="1-5-创建student表，并添加内容-1"><a href="#1-5-创建student表，并添加内容-1" class="headerlink" title="1.5 创建student表，并添加内容"></a>1.5 创建student表，并添加内容</h4><pre><code>create table student (name varchar(10),teacher varchar(10),age int,sex varchar(10),sno varchar(20)，birth int);

insert into student (name,teacher,age,sex,sno,birth) values (&#39;wanglin&#39;,&#39;jake&#39;,&#39;20&#39;,&#39;woman&#39;,&#39;201902&#39;,&#39;19940125&#39;);
insert into student (name,teacher,age,sex,sno,birth) values (&#39;liming&#39;,&#39;tony&#39;,&#39;22&#39;,&#39;man&#39;,&#39;201903&#39;,&#39;19910816&#39;);
insert into student (name,teacher,age,sex,sno,birth) values (&#39;fang&#39;,&#39;tony&#39;,&#39;22&#39;,&#39;woman&#39;,&#39;201904&#39;,&#39;19921021&#39;);
insert into student (name,teacher,age,sex,sno,birth) values (&#39;limeng&#39;,&#39;benny&#39;,&#39;23&#39;,&#39;women&#39;,&#39;201905&#39;,&#39;19951220&#39;);
insert into student (name,teacher,age,sex,sno,birth) values (&#39;liuhu&#39;,&#39;benny&#39;,&#39;23&#39;,&#39;woman&#39;,&#39;201906&#39;,&#39;19900202&#39;);

select * from student;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0/1-5.png" alt="1-5"></p>
<h3 id="二、返回当前日期和时间"><a href="#二、返回当前日期和时间" class="headerlink" title="二、返回当前日期和时间"></a>二、返回当前日期和时间</h3><h4 id="2-1-curdate-函数，年月日，默认返回’YYYY-MM-DD’格式"><a href="#2-1-curdate-函数，年月日，默认返回’YYYY-MM-DD’格式" class="headerlink" title="2.1 curdate()函数，年月日，默认返回’YYYY-MM-DD’格式"></a>2.1 curdate()函数，年月日，默认返回’YYYY-MM-DD’格式</h4><pre><code>select curdate();
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0/2-1.png" alt="2-1"></p>
<h4 id="2-2-返回’YYYYMMDD’格式"><a href="#2-2-返回’YYYYMMDD’格式" class="headerlink" title="2.2 返回’YYYYMMDD’格式"></a>2.2 返回’YYYYMMDD’格式</h4><pre><code>select curdate()+0;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0/2-2.png" alt="2-2"></p>
<h4 id="2-3-curtime-函数，时分秒，默认返回’HH-MM-SS’格式"><a href="#2-3-curtime-函数，时分秒，默认返回’HH-MM-SS’格式" class="headerlink" title="2.3 curtime()函数，时分秒，默认返回’HH:MM:SS’格式"></a>2.3 curtime()函数，时分秒，默认返回’HH:MM:SS’格式</h4><pre><code>select curtime();
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0/2-3.png" alt="2-3"></p>
<h4 id="2-4-返回’HHMMSS’格式"><a href="#2-4-返回’HHMMSS’格式" class="headerlink" title="2.4 返回’HHMMSS’格式"></a>2.4 返回’HHMMSS’格式</h4><pre><code>select curtime()+0;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0/2-4.png" alt="2-4"></p>
<h4 id="2-5-now-函数，年月日时分秒，默认返回’YYYY-MM-DD-HH-MM-SS’"><a href="#2-5-now-函数，年月日时分秒，默认返回’YYYY-MM-DD-HH-MM-SS’" class="headerlink" title="2.5 now()函数，年月日时分秒，默认返回’YYYY-MM-DD HH:MM:SS’"></a>2.5 now()函数，年月日时分秒，默认返回’YYYY-MM-DD HH:MM:SS’</h4><pre><code>select now();
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0/2-5.png" alt="2-5"></p>
<h4 id="2-6-返回’YYYYMMDDHHMMSS’"><a href="#2-6-返回’YYYYMMDDHHMMSS’" class="headerlink" title="2.6 返回’YYYYMMDDHHMMSS’"></a>2.6 返回’YYYYMMDDHHMMSS’</h4><pre><code>select now()+0;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0/2-6.png" alt="2-6"></p>
<h4 id="2-7-可用来计算时间差"><a href="#2-7-可用来计算时间差" class="headerlink" title="2.7 可用来计算时间差"></a>2.7 可用来计算时间差</h4><pre><code>select name,curdate()-birth from student;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0/2-7.png" alt="2-7"></p>
<h3 id="三、自动记录数据的改变时间"><a href="#三、自动记录数据的改变时间" class="headerlink" title="三、自动记录数据的改变时间"></a>三、自动记录数据的改变时间</h3><h4 id="3-1-创建表"><a href="#3-1-创建表" class="headerlink" title="3.1 创建表"></a>3.1 创建表</h4><pre><code>drop table student;
create table student (id int,name char(16),english tinyint,chinese tinyint,history tinyint,time timestamp);
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0/3-1.png" alt="3-1"></p>
<h4 id="3-2-插入记录"><a href="#3-2-插入记录" class="headerlink" title="3.2 插入记录"></a>3.2 插入记录</h4><pre><code>insert into student (id,name,english,chinese,history) values (11,&#39;Tom&#39;,66,93,67);
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0/3-2.png" alt="3-2"></p>
<h4 id="3-3-查看插入的记录"><a href="#3-3-查看插入的记录" class="headerlink" title="3.3 查看插入的记录"></a>3.3 查看插入的记录</h4><pre><code>selecet * from student;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0/3-3.png" alt="3-3"></p>
<h4 id="3-4-更新该记录"><a href="#3-4-更新该记录" class="headerlink" title="3.4 更新该记录"></a>3.4 更新该记录</h4><pre><code>update student set english=76 where id=11;
select * from student;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0/3-4.png" alt="3-4"></p>
<p>可以清楚看到，<strong>time列</strong>的时间被自动更改为修改记录的时间</p>
<h4 id="3-5-不改变其他值的情况下，更改timestamp"><a href="#3-5-不改变其他值的情况下，更改timestamp" class="headerlink" title="3.5 不改变其他值的情况下，更改timestamp"></a>3.5 不改变其他值的情况下，更改timestamp</h4><pre><code>update student set time=NULL where id=11;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0/3-5.png" alt="3-5"></p>
<h4 id="3-6"><a href="#3-6" class="headerlink" title="3.6"></a>3.6</h4><pre><code>update student set english=66,time=time where id=11;
select * from student where id=11;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0/3-6.png" alt="3-6"></p>
<h4 id="3-7"><a href="#3-7" class="headerlink" title="3.7"></a>3.7</h4><h3 id="四、返回日期和时间范围"><a href="#四、返回日期和时间范围" class="headerlink" title="四、返回日期和时间范围"></a>四、返回日期和时间范围</h3><h4 id="4-1-创建一个表"><a href="#4-1-创建一个表" class="headerlink" title="4.1 创建一个表"></a>4.1 创建一个表</h4><pre><code>create table weblog (data float,entrydate datetime);
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0/4-1.png" alt="4-1"></p>
<h4 id="4-2-随机增加几个数据"><a href="#4-2-随机增加几个数据" class="headerlink" title="4.2 随机增加几个数据"></a>4.2 随机增加几个数据</h4><pre><code>insert weblog values (rand(),now());
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0/4-2.png" alt="4-2"></p>
<h4 id="4-3-上面语句多执行几次，然后添加一个测试值"><a href="#4-3-上面语句多执行几次，然后添加一个测试值" class="headerlink" title="4.3 上面语句多执行几次，然后添加一个测试值"></a>4.3 上面语句多执行几次，然后添加一个测试值</h4><pre><code>insert weblog values (rand(),&#39;2016-07-19&#39;);
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0/4-3.png" alt="4-3"></p>
<h4 id="4-4-查看插入的数据"><a href="#4-4-查看插入的数据" class="headerlink" title="4.4 查看插入的数据"></a>4.4 查看插入的数据</h4><pre><code>select * from weblog;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0/4-4.png" alt="4-4"></p>
<h4 id="4-5-查看某天数据——错误示范"><a href="#4-5-查看某天数据——错误示范" class="headerlink" title="4.5 查看某天数据——错误示范"></a>4.5 查看某天数据——错误示范</h4><pre><code>select * from weblog where entrydate = &#39;2016-07-19&#39;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0/4-5.png" alt="4-5"></p>
<h4 id="4-6-查看某天数据——正确示范"><a href="#4-6-查看某天数据——正确示范" class="headerlink" title="4.6 查看某天数据——正确示范"></a>4.6 查看某天数据——正确示范</h4><h4 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h4><pre><code>select * from weblog where entrydate &gt;= &#39;2019-02-13&#39; and entrydate &lt;= &#39;2019-02-15&#39;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0/4-6.png" alt="4-6"></p>
<h4 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h4><pre><code>select * from weblog where entrydate like &#39;2019-02-14%&#39;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0/4-6-2.png" alt="4-6-2"></p>
<h4 id="方法三"><a href="#方法三" class="headerlink" title="方法三"></a>方法三</h4><pre><code>select * from weblog where entrydate &gt;= &#39;2019-02-14&#39;;
select * from weblog where entrydate &gt;= &#39;2019.02.14&#39;;
select * from weblog where entrydate &gt;= &#39;2019 02 14&#39;;
select * from weblog where entrydate &gt;= &#39;20190214&#39;;
select * from weblog where entrydate &gt;= &#39;2019/02/14&#39;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0/4-6-3.png" alt="4-6-3"></p>
<h4 id="五、比较日期时间"><a href="#五、比较日期时间" class="headerlink" title="五、比较日期时间"></a>五、比较日期时间</h4><h4 id="5-1-to-days-函数"><a href="#5-1-to-days-函数" class="headerlink" title="5.1 to_days()函数"></a>5.1 to_days()函数</h4><p>给出一个日期date，返回一个天数(从0年的天数)，date可以是一个数字，也可以是一个串值，当然更可以是包含日期的时间类型</p>
<pre><code>select to_days(960501);
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0/5-1.png" alt="5-1"></p>
<pre><code>select to_days(&#39;1997-07-01&#39;);
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0/5-1-2.png" alt="5-1-2"></p>
<h4 id="5-2-返回2个时间相差的天数"><a href="#5-2-返回2个时间相差的天数" class="headerlink" title="5.2 返回2个时间相差的天数"></a>5.2 返回2个时间相差的天数</h4><pre><code>select to_days(now())-to_days(&#39;20011010&#39;);
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%97%B6%E9%97%B4%E5%87%BD%E6%95%B0/5-2.png" alt="5-2"></p>
<h1 id="（六）数据表操作"><a href="#（六）数据表操作" class="headerlink" title="（六）数据表操作"></a>（六）数据表操作</h1><h2 id="【原理】-5"><a href="#【原理】-5" class="headerlink" title="【原理】"></a>【原理】</h2><p>（1）MySQL的表的三种类型</p>
<p>（2）如何创建表、删除表</p>
<p>（3）如何改变表的结构、名字</p>
<p>（4）如何使用mysqlshow使用程序</p>
<h2 id="【步骤】-5"><a href="#【步骤】-5" class="headerlink" title="【步骤】"></a>【步骤】</h2><h3 id="一、Mysql数据表的基本操作"><a href="#一、Mysql数据表的基本操作" class="headerlink" title="一、Mysql数据表的基本操作"></a>一、Mysql数据表的基本操作</h3><h4 id="1-1-启动mysql服务-5"><a href="#1-1-启动mysql服务-5" class="headerlink" title="1.1 启动mysql服务"></a>1.1 启动mysql服务</h4><pre><code>service mysqld restart
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E9%9B%86%E5%90%88%E5%87%BD%E6%95%B0/1-1.png" alt="1-1"></p>
<h4 id="1-2-进入mysql-3"><a href="#1-2-进入mysql-3" class="headerlink" title="1.2 进入mysql"></a>1.2 进入mysql</h4><pre><code>mysql
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E9%9B%86%E5%90%88%E5%87%BD%E6%95%B0/1-2.png" alt="1-2"></p>
<h4 id="1-3-用show-descrtbe语句显示数据表"><a href="#1-3-用show-descrtbe语句显示数据表" class="headerlink" title="1.3 用show/descrtbe语句显示数据表"></a>1.3 用show/descrtbe语句显示数据表</h4><pre><code>show table [from db_name] [like wild]
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/1-3.png" alt="1-3"></p>
<h4 id="1-4-列出在一个给定表中的列"><a href="#1-4-列出在一个给定表中的列" class="headerlink" title="1.4 列出在一个给定表中的列"></a>1.4 列出在一个给定表中的列</h4><pre><code>show columns from tbl_name [from db_name] [like wild]
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/1-4.png" alt="1-4"></p>
<h4 id="1-5-列出一个表的索引"><a href="#1-5-列出一个表的索引" class="headerlink" title="1.5 列出一个表的索引"></a>1.5 列出一个表的索引</h4><pre><code>show index from tbl_name [from db_name]
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/1-5.png" alt="1-5"></p>
<h4 id="1-6-列出数据表以及表状态信息"><a href="#1-6-列出数据表以及表状态信息" class="headerlink" title="1.6 列出数据表以及表状态信息"></a>1.6 列出数据表以及表状态信息</h4><pre><code>show table status [from db_name] [like wild]
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/1-6.png" alt="1-6"></p>
<h4 id="1-7-用dscribe查看表的列信息"><a href="#1-7-用dscribe查看表的列信息" class="headerlink" title="1.7 用dscribe查看表的列信息"></a>1.7 用dscribe查看表的列信息</h4><pre><code>{describe|desc} tbl_name {col_name|wild}
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/1-7.png" alt="1-7"></p>
<h4 id="1-8-使用mysqlshow工具得到信息，得到已有数据列的列表"><a href="#1-8-使用mysqlshow工具得到信息，得到已有数据列的列表" class="headerlink" title="1.8 使用mysqlshow工具得到信息，得到已有数据列的列表"></a>1.8 使用mysqlshow工具得到信息，得到已有数据列的列表</h4><p>先创建用户</p>
<pre><code>mysqladmin -u root password &#39;123456789&#39;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/1-8.png" alt="1-8"></p>
<p>列出某数据库db_name中已有的表：</p>
<pre><code>mysqlshow db_name
</code></pre><p>列出某数据表db_name.tbl_name的结构信息</p>
<pre><code>mysqlshow db_name.tbl_name
</code></pre><p>列出一张表的索引</p>
<pre><code>mysqlshow -k db_name.tbl_name
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/1-8-2.png" alt="1-8-2"></p>
<h4 id="1-9-创建mytest和guestbook数据表"><a href="#1-9-创建mytest和guestbook数据表" class="headerlink" title="1.9 创建mytest和guestbook数据表"></a>1.9 创建mytest和guestbook数据表</h4><pre><code>create database mytest;

use mytest;
create table guestbook (visitor varchar(40),comment text,entrydate datetime);
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/1-9.png" alt="1-9"></p>
<h4 id="1-10-创建test表"><a href="#1-10-创建test表" class="headerlink" title="1.10 创建test表"></a>1.10 创建test表</h4><pre><code>create table test (b int not null auto_increment,c int,key (b));
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/1-10.png" alt="1-10"></p>
<h4 id="1-11-创建table1在create语句后指定一个select，mysql将为在select中的所有单元创建新字段"><a href="#1-11-创建table1在create语句后指定一个select，mysql将为在select中的所有单元创建新字段" class="headerlink" title="1.11 创建table1在create语句后指定一个select，mysql将为在select中的所有单元创建新字段"></a>1.11 创建table1在create语句后指定一个select，mysql将为在select中的所有单元创建新字段</h4><pre><code>show columns from test from mytest;
create table test1 (a int no null auto_increament,key(a),key(b)) select b,c from test;
show columns from test1 from mytest;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/1-11.png" alt="1-11"></p>
<h4 id="1-12-选择一个表的全部内容，拷贝一个表"><a href="#1-12-选择一个表的全部内容，拷贝一个表" class="headerlink" title="1.12 选择一个表的全部内容，拷贝一个表"></a>1.12 选择一个表的全部内容，拷贝一个表</h4><pre><code>create table test2 select * from test;
show columns from test2 from mytest;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/1-12.png" alt="1-12"></p>
<h4 id="1-13-利用一个总是失败的where子句来创建一个空表"><a href="#1-13-利用一个总是失败的where子句来创建一个空表" class="headerlink" title="1.13 利用一个总是失败的where子句来创建一个空表"></a>1.13 利用一个总是失败的where子句来创建一个空表</h4><pre><code>create table test3 select * from test where 0;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/1-13.png" alt="1-13"></p>
<h4 id="1-14-用alter-table语句增加列修改表的结构"><a href="#1-14-用alter-table语句增加列修改表的结构" class="headerlink" title="1.14 用alter table语句增加列修改表的结构"></a>1.14 用alter table语句增加列修改表的结构</h4><pre><code>alter table test add d int;
show columns from test from mytest;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/1-14.png" alt="1-14"></p>
<h4 id="1-15-alter改变列语法"><a href="#1-15-alter改变列语法" class="headerlink" title="1.15 alter改变列语法"></a>1.15 alter改变列语法</h4><pre><code>alter table test modify c char;
desc test;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/1-15.png" alt="1-15"></p>
<h4 id="1-16-利用alter更改表名"><a href="#1-16-利用alter更改表名" class="headerlink" title="1.16 利用alter更改表名"></a>1.16 利用alter更改表名</h4><pre><code>alter table tbl_name rename new_tbl；
show tables;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/1-16.png" alt="1-16"></p>
<h4 id="1-17-用drop-table语句删除一个或者多个表"><a href="#1-17-用drop-table语句删除一个或者多个表" class="headerlink" title="1.17 用drop table语句删除一个或者多个表"></a>1.17 用drop table语句删除一个或者多个表</h4><pre><code>drop table test1;
show tables;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/1-17.png" alt="1-17"></p>
<h3 id="二、向数据表中插入数据"><a href="#二、向数据表中插入数据" class="headerlink" title="二、向数据表中插入数据"></a>二、向数据表中插入数据</h3><h4 id="2-1-使用insert语句插入新数据，先创建表"><a href="#2-1-使用insert语句插入新数据，先创建表" class="headerlink" title="2.1 使用insert语句插入新数据，先创建表"></a>2.1 使用insert语句插入新数据，先创建表</h4><pre><code>create table student(name varchar(20) not null,age int not null);
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/2-1.png" alt="2-1"></p>
<h4 id="2-2-插入数据"><a href="#2-2-插入数据" class="headerlink" title="2.2 插入数据"></a>2.2 插入数据</h4><pre><code>insert into student values (&#39;jake&#39;,21);
insert into student values (&#39;jake&#39;,22),(&#39;tony&#39;,23);
select * from student;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/2-2.png" alt="2-2"></p>
<h4 id="2-3"><a href="#2-3" class="headerlink" title="2.3"></a>2.3</h4><pre><code>create table number (col1 int,col2 int);
insert into number (col1,col2) values (15,col1+2);
select * from number;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/2-3.png" alt="2-3"></p>
<h4 id="2-4-使用insert…select语句插入从其他表选择的行"><a href="#2-4-使用insert…select语句插入从其他表选择的行" class="headerlink" title="2.4 使用insert…select语句插入从其他表选择的行"></a>2.4 使用insert…select语句插入从其他表选择的行</h4><pre><code>create table number2 (col3 int,col4 int);
insert into number2 (col3,col4) select col1,col2 from number;
select * from number2;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/2-4.png" alt="2-4"></p>
<h3 id="三、查询数据表中的记录"><a href="#三、查询数据表中的记录" class="headerlink" title="三、查询数据表中的记录"></a>三、查询数据表中的记录</h3><h4 id="3-1-select最简单的检索"><a href="#3-1-select最简单的检索" class="headerlink" title="3.1 select最简单的检索"></a>3.1 select最简单的检索</h4><pre><code>select * from number;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/3-1.png" alt="3-1"></p>
<h4 id="3-2-查询特定行"><a href="#3-2-查询特定行" class="headerlink" title="3.2 查询特定行"></a>3.2 查询特定行</h4><pre><code>select * from student where name = &#39;jake&#39;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/3-2.png" alt="3-2"></p>
<h4 id="3-3-查询特定列"><a href="#3-3-查询特定列" class="headerlink" title="3.3 查询特定列"></a>3.3 查询特定列</h4><pre><code>select * from student where age = &#39;22&#39;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/3-3.png" alt="3-3"></p>
<h4 id="3-4-条件查询"><a href="#3-4-条件查询" class="headerlink" title="3.4 条件查询"></a>3.4 条件查询</h4><pre><code>select * from student where age &gt; &#39;10&#39;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/3-4.png" alt="3-4"></p>
<h4 id="3-5-组合条件查询"><a href="#3-5-组合条件查询" class="headerlink" title="3.5 组合条件查询"></a>3.5 组合条件查询</h4><pre><code>select * from student where age &gt; &#39;21&#39; and name = &#39;jake&#39;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/3-5.png" alt="3-5"></p>
<h4 id="3-6-组合条件查询——or"><a href="#3-6-组合条件查询——or" class="headerlink" title="3.6 组合条件查询——or"></a>3.6 组合条件查询——or</h4><pre><code>select * from student where name = &#39;jake&#39; or age &lt; &#39;10&#39;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/3-6.png" alt="3-6"></p>
<h4 id="3-7-查询排序"><a href="#3-7-查询排序" class="headerlink" title="3.7 查询排序"></a>3.7 查询排序</h4><pre><code>select * from student order by age;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/3-7.png" alt="3-7"></p>
<h4 id="3-8-查询排序逆序排序"><a href="#3-8-查询排序逆序排序" class="headerlink" title="3.8 查询排序逆序排序"></a>3.8 查询排序逆序排序</h4><pre><code>select * from student order by age desc;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/3-7.png" alt="3-8"></p>
<h3 id="四、查询分组和行技术"><a href="#四、查询分组和行技术" class="headerlink" title="四、查询分组和行技术"></a>四、查询分组和行技术</h3><h4 id="4-1-group-by语句"><a href="#4-1-group-by语句" class="headerlink" title="4.1 group by语句"></a>4.1 group by语句</h4><pre><code>select * from student group by age;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/4-1.png" alt="4-1"></p>
<h4 id="4-2-count-函数计数非NULL结果"><a href="#4-2-count-函数计数非NULL结果" class="headerlink" title="4.2 count()函数计数非NULL结果"></a>4.2 count()函数计数非NULL结果</h4><pre><code>select count(*) from student;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/4-2.png" alt="4-2"></p>
<h4 id="4-3-计算age为非空的记录数目"><a href="#4-3-计算age为非空的记录数目" class="headerlink" title="4.3 计算age为非空的记录数目"></a>4.3 计算age为非空的记录数目</h4><pre><code>select count(age) from student;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/4-3.png" alt="4-3"></p>
<h4 id="4-4-创建一个表并添加内容"><a href="#4-4-创建一个表并添加内容" class="headerlink" title="4.4 创建一个表并添加内容"></a>4.4 创建一个表并添加内容</h4><pre><code>create table student (name varchar(10),teacher varchar(10),age int,sex varchar(10),sno varchar(20));

insert into student (name,teacher,age,sex,sno) values (&#39;wanglin&#39;,&#39;jake&#39;,&#39;20&#39;,&#39;woman&#39;,&#39;201902&#39;);
insert into student (name,teacher,age,sex,sno) values (&#39;liming&#39;,&#39;tony&#39;,&#39;22&#39;,&#39;man&#39;,&#39;201903&#39;);
insert into student (name,teacher,age,sex,sno) values (&#39;fang&#39;,&#39;tony&#39;,&#39;22&#39;,&#39;woman&#39;,&#39;201904&#39;);
insert into student (name,teacher,age,sex,sno) values (&#39;limeng&#39;,&#39;benny&#39;,&#39;23&#39;,&#39;women&#39;,&#39;201905&#39;);
insert into student (name,teacher,age,sex,sno) values (&#39;liuhu&#39;,&#39;benny&#39;,&#39;23&#39;,&#39;woman&#39;,&#39;201906&#39;);
insert into student (name,teacher,age,sex,sno) values (&#39;haha&#39;,&#39;benny&#39;,&#39;NULL&#39;,&#39;man&#39;,&#39;201906&#39;);

select * from student;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/4-4.png" alt="4-4"></p>
<h4 id="4-5-用update修改记录"><a href="#4-5-用update修改记录" class="headerlink" title="4.5 用update修改记录"></a>4.5 用update修改记录</h4><pre><code>update students set sex = &#39;man&#39; where name = &#39;wanglin&#39;;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/4-5.png" alt="4-5"></p>
<h4 id="4-6-用delete删除记录"><a href="#4-6-用delete删除记录" class="headerlink" title="4.6 用delete删除记录"></a>4.6 用delete删除记录</h4><pre><code>delete from students where name = &#39;haha&#39;;
select * from students
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/4-6.png" alt="4-6"></p>
<h4 id="4-7-清空整个表"><a href="#4-7-清空整个表" class="headerlink" title="4.7 清空整个表"></a>4.7 清空整个表</h4><pre><code>delete from students;
select * from students;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C/4-7.png" alt="4-7"></p>
<h1 id="（八）数据库连接"><a href="#（八）数据库连接" class="headerlink" title="（八）数据库连接"></a>（八）数据库连接</h1><h2 id="【原理】-6"><a href="#【原理】-6" class="headerlink" title="【原理】"></a>【原理】</h2><p>（1）建立与中止和服务器的连接</p>
<h2 id="【步骤】-6"><a href="#【步骤】-6" class="headerlink" title="【步骤】"></a>【步骤】</h2><h3 id="一、建立和中止与服务器的连接"><a href="#一、建立和中止与服务器的连接" class="headerlink" title="一、建立和中止与服务器的连接"></a>一、建立和中止与服务器的连接</h3><h4 id="1-1-启动mysql服务-6"><a href="#1-1-启动mysql服务-6" class="headerlink" title="1.1 启动mysql服务"></a>1.1 启动mysql服务</h4><pre><code>service mysqld restart
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E9%9B%86%E5%90%88%E5%87%BD%E6%95%B0/1-1.png" alt="1-1"></p>
<h4 id="1-2-进入mysql-4"><a href="#1-2-进入mysql-4" class="headerlink" title="1.2 进入mysql"></a>1.2 进入mysql</h4><pre><code>mysql
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E9%9B%86%E5%90%88%E5%87%BD%E6%95%B0/1-2.png" alt="1-2"></p>
<h4 id="1-3-直接连接一个数据库"><a href="#1-3-直接连接一个数据库" class="headerlink" title="1.3 直接连接一个数据库"></a>1.3 直接连接一个数据库</h4><pre><code>mysql mysql
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5/1-3.png" alt="1-3"></p>
<h4 id="1-4-如果服务器不在本地，需要指定主机名"><a href="#1-4-如果服务器不在本地，需要指定主机名" class="headerlink" title="1.4 如果服务器不在本地，需要指定主机名"></a>1.4 如果服务器不在本地，需要指定主机名</h4><p>这里没有密码，直接回车</p>
<pre><code>mysql -h localhost -u root -p
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5/1-4.png" alt="1-4"></p>
<h4 id="1-5-quit可以退出mysql命令行"><a href="#1-5-quit可以退出mysql命令行" class="headerlink" title="1.5 quit可以退出mysql命令行"></a>1.5 quit可以退出mysql命令行</h4><pre><code>quit
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5/1-5.png" alt="1-5"></p>
<h4 id="1-6-创建文本，批量操作"><a href="#1-6-创建文本，批量操作" class="headerlink" title="1.6 创建文本，批量操作"></a>1.6 创建文本，批量操作</h4><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5/1-6.png" alt="1-6"></p>
<h4 id="1-7-回到命令行，使用刚才创建的文本"><a href="#1-7-回到命令行，使用刚才创建的文本" class="headerlink" title="1.7 回到命令行，使用刚才创建的文本"></a>1.7 回到命令行，使用刚才创建的文本</h4><pre><code>mysql -u root -p &lt; /etc/simple
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5/1-7.png" alt="1-7"></p>
<h1 id="（九）启动与关闭"><a href="#（九）启动与关闭" class="headerlink" title="（九）启动与关闭"></a>（九）启动与关闭</h1><h2 id="【原理】-7"><a href="#【原理】-7" class="headerlink" title="【原理】"></a>【原理】</h2><p>（1）客户机使用SQL语句与Mysql服务器通信。为了与MySQL服务器进行通信，必须熟练掌握SQL。例如，在使用诸如MySQL客户机这样的程序时，其功能首先是作为一种发送SQL语句给服务器执行的工具。而且，如果编写使用编程语言所提供的MySQL接口的程序时，也必须熟悉SQL语言，因为需要沟通</p>
<h2 id="【步骤】-7"><a href="#【步骤】-7" class="headerlink" title="【步骤】"></a>【步骤】</h2><h3 id="一、Mysql的启动与终止"><a href="#一、Mysql的启动与终止" class="headerlink" title="一、Mysql的启动与终止"></a>一、Mysql的启动与终止</h3><h4 id="1-1-启动mysql服务-7"><a href="#1-1-启动mysql服务-7" class="headerlink" title="1.1 启动mysql服务"></a>1.1 启动mysql服务</h4><pre><code>service mysqld start
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%AF%E5%8A%A8%E5%92%8C%E5%85%B3%E9%97%AD/1-1.png" alt="1-1"></p>
<h4 id="1-2-查看是否自启动"><a href="#1-2-查看是否自启动" class="headerlink" title="1.2 查看是否自启动"></a>1.2 查看是否自启动</h4><pre><code>chkconfig --list | grep 
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%AF%E5%8A%A8%E5%92%8C%E5%85%B3%E9%97%AD/1-2.png" alt="1-2"></p>
<h4 id="1-3-设置成自启动并查看"><a href="#1-3-设置成自启动并查看" class="headerlink" title="1.3 设置成自启动并查看"></a>1.3 设置成自启动并查看</h4><pre><code>chkconfig mysqld on
chkconfig --list | grep mysqld
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%AF%E5%8A%A8%E5%92%8C%E5%85%B3%E9%97%AD/1-3.png" alt="1-3"></p>
<h4 id="1-4-此时创建账户密码"><a href="#1-4-此时创建账户密码" class="headerlink" title="1.4 此时创建账户密码"></a>1.4 此时创建账户密码</h4><pre><code>mysqladmin -u root password &#39;123456789&#39;
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%AF%E5%8A%A8%E5%92%8C%E5%85%B3%E9%97%AD/1-4.png" alt="1-4"></p>
<h4 id="1-5"><a href="#1-5" class="headerlink" title="1.5"></a>1.5</h4><h4 id="1-6-输入mysqladmin-shutdown出错"><a href="#1-6-输入mysqladmin-shutdown出错" class="headerlink" title="1.6 输入mysqladmin shutdown出错"></a>1.6 输入mysqladmin shutdown出错</h4><pre><code>mysqladmin shutdown
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%AF%E5%8A%A8%E5%92%8C%E5%85%B3%E9%97%AD/1-6.png" alt="1-6"></p>
<h4 id="表示需要一个可以正常连接的用户，正确命令："><a href="#表示需要一个可以正常连接的用户，正确命令：" class="headerlink" title="表示需要一个可以正常连接的用户，正确命令："></a>表示需要一个可以正常连接的用户，正确命令：</h4><p>需要输入刚才创建的密码</p>
<pre><code>mysqladmin -u root -p shutdown
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%AF%E5%8A%A8%E5%92%8C%E5%85%B3%E9%97%AD/1-6-2.png" alt="1-6-2"></p>
<h4 id="1-7-关闭后，连接失败"><a href="#1-7-关闭后，连接失败" class="headerlink" title="1.7 关闭后，连接失败"></a>1.7 关闭后，连接失败</h4><pre><code>mysql
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%AF%E5%8A%A8%E5%92%8C%E5%85%B3%E9%97%AD/1-7.png" alt="1-7"></p>
<h4 id="1-8-先输入su-mysql，再输入mysqladmin-–help查看帮助"><a href="#1-8-先输入su-mysql，再输入mysqladmin-–help查看帮助" class="headerlink" title="1.8 先输入su mysql，再输入mysqladmin –help查看帮助"></a>1.8 先输入su mysql，再输入mysqladmin –help查看帮助</h4><pre><code>su mysql
mysqladmin --help
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%AF%E5%8A%A8%E5%92%8C%E5%85%B3%E9%97%AD/1-8.png" alt="1-8"></p>
<h1 id="（十）安装"><a href="#（十）安装" class="headerlink" title="（十）安装"></a>（十）安装</h1><h2 id="【实验原理】"><a href="#【实验原理】" class="headerlink" title="【实验原理】"></a>【实验原理】</h2><p>（1）源代码配置并编译后进行安装，缺省件安装在 <strong>“/usr/logcal”</strong> 子目录下</p>
<table>
<thead>
<tr>
<th style="text-align:center">目录</th>
<th style="text-align:center">目录的内容</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">bin</td>
<td style="text-align:center">客户程序和脚本</td>
</tr>
<tr>
<td style="text-align:center">include/mysql</td>
<td style="text-align:center">包含（头）文件</td>
</tr>
<tr>
<td style="text-align:center">info</td>
<td style="text-align:center">info格式的文档</td>
</tr>
<tr>
<td style="text-align:center">lib/mysql</td>
<td style="text-align:center">库文件</td>
</tr>
<tr>
<td style="text-align:center">libexec</td>
<td style="text-align:center">mysqld服务器</td>
</tr>
<tr>
<td style="text-align:center">share/mysql</td>
<td style="text-align:center">错误消息文件</td>
</tr>
<tr>
<td style="text-align:center">sql-bench</td>
<td style="text-align:center">基准程序和crash-me测试</td>
</tr>
<tr>
<td style="text-align:center">var</td>
<td style="text-align:center">数据库和日志文件</td>
</tr>
</tbody>
</table>
<p>（2）在一个安装目录内，源代码安装的布局在下列方面不同于二进制安装：</p>
<table>
<thead>
<tr>
<th style="text-align:left">mysl服务器被安装在“libexec”目录而不是“bin”目录内</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">数据目录是“var”而非“data”</td>
</tr>
<tr>
<td style="text-align:left">mysqL_install_db被安装在“/usr/local/bin”目录而非“/usr/local/mysql/scripts”内</td>
</tr>
<tr>
<td style="text-align:left">头文件和库目录是“include/mysql”和“lib/mysq”而非“include”和“lib”</td>
</tr>
</tbody>
</table>
<p>（3）rpm安装本质上也属于二进制分发，因此安装布局同上。将自动安装启动脚本到/etc/rc.local目录中，MySQL随系统的启动而自动启动。对于RPM分发程序、库文件、头文件和配置文件，分别安装Centos标准的目录/usr/bin、/usr/lib/mysql、/usr/include/mysqll/etc/mysql.缺省时，/var/lib/mysql</p>
<h2 id="【步骤】-8"><a href="#【步骤】-8" class="headerlink" title="【步骤】"></a>【步骤】</h2><h3 id="一、通过rpm来进行mysql-server的安装"><a href="#一、通过rpm来进行mysql-server的安装" class="headerlink" title="一、通过rpm来进行mysql-server的安装"></a>一、通过rpm来进行mysql-server的安装</h3><h4 id="1-1-查看CentOS自带mysql是否以及安装"><a href="#1-1-查看CentOS自带mysql是否以及安装" class="headerlink" title="1.1 查看CentOS自带mysql是否以及安装"></a>1.1 查看CentOS自带mysql是否以及安装</h4><pre><code>rpm -qa | grep mysql
</code></pre><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E8%A3%85/1-1.png" alt="1-1"></p>
<h4 id="1-2-安装依赖包"><a href="#1-2-安装依赖包" class="headerlink" title="1.2 安装依赖包"></a>1.2 安装依赖包</h4><p>通过输入命令安装Mysql相关依赖包及Mysql主程序</p>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E8%A3%85/1-2.png" alt="1-2"></p>
<h4 id="1-3-通过rpm命令查看刚才装好的mysql-server版本"><a href="#1-3-通过rpm命令查看刚才装好的mysql-server版本" class="headerlink" title="1.3 通过rpm命令查看刚才装好的mysql-server版本"></a>1.3 通过rpm命令查看刚才装好的mysql-server版本</h4><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E8%A3%85/1-3.png" alt="1-3"></p>
<h1 id="（十一）设置与测试"><a href="#（十一）设置与测试" class="headerlink" title="（十一）设置与测试"></a>（十一）设置与测试</h1><h2 id="【实验原理】-1"><a href="#【实验原理】-1" class="headerlink" title="【实验原理】"></a>【实验原理】</h2><p>（1）为了安全性，你应该避免使用root帐户启动MySQL守护程序，创建一个专门用于启动守护程序的帐户mysql，并且让数据库属于这个帐户</p>
<h2 id="【步骤】-9"><a href="#【步骤】-9" class="headerlink" title="【步骤】"></a>【步骤】</h2><h3 id="一、初始化授权表"><a href="#一、初始化授权表" class="headerlink" title="一、初始化授权表"></a>一、初始化授权表</h3><h4 id="1-1-初始化账户"><a href="#1-1-初始化账户" class="headerlink" title="1.1 初始化账户"></a>1.1 初始化账户</h4><p>一旦已经安装了MySQL，便需要初始化授权表即mysqI数据库的初始化过程，因为此时MySQL权限系统需要的数据库和表并不存在。但初始化之前需要首先切换到mysql帐户，否则如果第一次启动服务器是使用的是其他用户，那么数据库文件就为这个用户所有，之后再由用户mysql启动守护程序，就会因为数据库文件权限的问题得到一个错误</p>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E7%BD%AE%E5%92%8C%E6%B5%8B%E8%AF%95/1-1.png" alt="1-1"></p>
<h4 id="1-2-启动服务"><a href="#1-2-启动服务" class="headerlink" title="1.2 启动服务"></a>1.2 启动服务</h4><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E7%BD%AE%E5%92%8C%E6%B5%8B%E8%AF%95/1-2.png" alt="1-2"></p>
<h4 id="1-3-查看是否开机自动启动"><a href="#1-3-查看是否开机自动启动" class="headerlink" title="1.3 查看是否开机自动启动"></a>1.3 查看是否开机自动启动</h4><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E7%BD%AE%E5%92%8C%E6%B5%8B%E8%AF%95/1-3.png" alt="1-3"></p>
<h4 id="1-4-设置开机自动启动"><a href="#1-4-设置开机自动启动" class="headerlink" title="1.4 设置开机自动启动"></a>1.4 设置开机自动启动</h4><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E7%BD%AE%E5%92%8C%E6%B5%8B%E8%AF%95/1-4.png" alt="1-4"></p>
<h3 id="二、测试"><a href="#二、测试" class="headerlink" title="二、测试"></a>二、测试</h3><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E7%BD%AE%E5%92%8C%E6%B5%8B%E8%AF%95/2-1.png" alt="2-1"></p>
<h4 id="2-2-本实验显示如下"><a href="#2-2-本实验显示如下" class="headerlink" title="2.2 本实验显示如下"></a>2.2 本实验显示如下</h4><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E7%BD%AE%E5%92%8C%E6%B5%8B%E8%AF%95/2-2.png" alt="2-2"></p>
<h4 id="2-3-连接测试"><a href="#2-3-连接测试" class="headerlink" title="2.3 连接测试"></a>2.3 连接测试</h4><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E7%BD%AE%E5%92%8C%E6%B5%8B%E8%AF%95/2-3.png" alt="2-3"></p>
<h4 id="2-4-show-databases查看安装的数据库"><a href="#2-4-show-databases查看安装的数据库" class="headerlink" title="2.4 show databases查看安装的数据库"></a>2.4 show databases查看安装的数据库</h4><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E7%BD%AE%E5%92%8C%E6%B5%8B%E8%AF%95/2-4.png" alt="2-4"></p>
<h4 id="2-5-如果一切正常，说明安装成功"><a href="#2-5-如果一切正常，说明安装成功" class="headerlink" title="2.5 如果一切正常，说明安装成功"></a>2.5 如果一切正常，说明安装成功</h4><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E7%BD%AE%E5%92%8C%E6%B5%8B%E8%AF%95/2-5.png" alt="2-5"></p>
<h3 id="三、Mysql数据库的主要配置文件"><a href="#三、Mysql数据库的主要配置文件" class="headerlink" title="三、Mysql数据库的主要配置文件"></a>三、Mysql数据库的主要配置文件</h3><h4 id="3-1-查看mysql的主配置文件-etc-my-cnf"><a href="#3-1-查看mysql的主配置文件-etc-my-cnf" class="headerlink" title="3.1 查看mysql的主配置文件/etc/my.cnf"></a>3.1 查看mysql的主配置文件/etc/my.cnf</h4><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E7%BD%AE%E5%92%8C%E6%B5%8B%E8%AF%95/3-1.png" alt="3-1"></p>
<h4 id="3-2-查看mysql数据库的数据库文件存放位置-var-lib-mysql"><a href="#3-2-查看mysql数据库的数据库文件存放位置-var-lib-mysql" class="headerlink" title="3.2 查看mysql数据库的数据库文件存放位置/var/lib/mysql"></a>3.2 查看mysql数据库的数据库文件存放位置/var/lib/mysql</h4><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E7%BD%AE%E5%92%8C%E6%B5%8B%E8%AF%95/3-2.png" alt="3-2"></p>
<h4 id="3-3-此时自己创建一个数据库：students"><a href="#3-3-此时自己创建一个数据库：students" class="headerlink" title="3.3 此时自己创建一个数据库：students"></a>3.3 此时自己创建一个数据库：students</h4><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E7%BD%AE%E5%92%8C%E6%B5%8B%E8%AF%95/3-3.png" alt="3-3"></p>
<h4 id="3-4-再次查看，验证数据库文件存放位置"><a href="#3-4-再次查看，验证数据库文件存放位置" class="headerlink" title="3.4 再次查看，验证数据库文件存放位置"></a>3.4 再次查看，验证数据库文件存放位置</h4><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E7%BD%AE%E5%92%8C%E6%B5%8B%E8%AF%95/3-4.png" alt="3-4"></p>
<h4 id="3-5-mysql数据库的日志输出存放位置-var-log"><a href="#3-5-mysql数据库的日志输出存放位置-var-log" class="headerlink" title="3.5 mysql数据库的日志输出存放位置/var/log"></a>3.5 mysql数据库的日志输出存放位置/var/log</h4><p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E7%BD%AE%E5%92%8C%E6%B5%8B%E8%AF%95/3-5.png" alt="3-5"></p>
<h3 id="四、更改root用户的密码"><a href="#四、更改root用户的密码" class="headerlink" title="四、更改root用户的密码"></a>四、更改root用户的密码</h3><h4 id="4-1-1"><a href="#4-1-1" class="headerlink" title="4.1"></a>4.1</h4><p>初始化授权表之后，最重要的工作是更改数据库服务器root用户的密码，这对于数据库系统的安全性非常重要，因为root用户是数据库的主宰，拥有不受限制的权限，root用户的密码失窃，就意味着MySQL不再属于你了。更改管理员的密码，初始化授权表之后，root用户是没有密码的，这对安全有毁灭性的影响。你可以运行mysqladmin（请注意，此命令不一定在你的path中，所以最好是转到此命令的目录中直接执行）</p>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/MySQL5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E4%B8%8E%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E7%BD%AE%E5%92%8C%E6%B5%8B%E8%AF%95/4-1.png" alt="4-1"></p>
<h2 id="【思考】-2"><a href="#【思考】-2" class="headerlink" title="【思考】"></a>【思考】</h2><h4 id="Mysqladmin是哪个模式下的命令？"><a href="#Mysqladmin是哪个模式下的命令？" class="headerlink" title="Mysqladmin是哪个模式下的命令？"></a><strong>Mysqladmin</strong>是哪个模式下的命令？</h4><p>在你的path中，也可以是转到此命令的目录中直接执行</p>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls"
                data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
            <ul id="audio-list" style="display:none">
                
                
                <li title='0' data-url='/knlvre.github.io/statics/forhim.mp3'></li>
                
                    
            </ul>
            
            
            
    <div id='gitalk-container' class="comment link"
        data-ae='true'
        data-ci='ec894e2b66f752e8b7fb'
        data-cs='3ccc2e92bb350688fe2c2dc2930189b62622bfb1'
        data-r='blog-comments'
        data-o='TriDiamond'
        data-a='TriDiamond'
        data-d=''
    >Comments</div>


            
            
        </div>
        <div class="sidebar">
            <div class="box animated fadeInRight">
                <div class="subbox">
                    <img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/ico/HaZong.jpg" height=300 width=300></img>
                    <p>Knlvre</p>
                    <span>Notes During Information Security Learning.</span>
                    <dl>
                        <dd><a href="https://github.com/knlvre" target="_blank"><span
                                    class=" iconfont icon-github"></span></a></dd>
                        <dd><a href="https://github.com/knlvre" target="_blank"><span
                                    class=" iconfont icon-twitter"></span></a></dd>
                        <dd><a href="https://github.com/knlvre" target="_blank"><span
                                    class=" iconfont icon-stack-overflow"></span></a></dd>
                    </dl>
                </div>
                <ul>
                    <li><a href="/">60 <p>Articles</p></a></li>
                    <li><a href="/categories">0 <p>Categories</p></a></li>
                    <li><a href="/tags">9 <p>Tags</p></a></li>
                </ul>
            </div>
            
            
            
            <div class="box sticky animated fadeInRight faster">
                <div id="toc" class="subbox">
                    <h4>Contents</h4>
                    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#（一）数据库安全"><span class="toc-number">1.</span> <span class="toc-text">（一）数据库安全</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#【Tip】"><span class="toc-number">1.1.</span> <span class="toc-text">【Tip】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#【原理】"><span class="toc-number">1.2.</span> <span class="toc-text">【原理】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#【步骤】"><span class="toc-number">1.3.</span> <span class="toc-text">【步骤】</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#一、"><span class="toc-number">1.3.1.</span> <span class="toc-text">一、</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#二、安全设置"><span class="toc-number">1.3.2.</span> <span class="toc-text">二、安全设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#三、vsFTP安全设置"><span class="toc-number">1.3.3.</span> <span class="toc-text">三、vsFTP安全设置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#【思考】"><span class="toc-number">1.4.</span> <span class="toc-text">【思考】</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#（二）备份和恢复"><span class="toc-number">2.</span> <span class="toc-text">（二）备份和恢复</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#【原理】-1"><span class="toc-number">2.1.</span> <span class="toc-text">【原理】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#【步骤】-1"><span class="toc-number">2.2.</span> <span class="toc-text">【步骤】</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#一、使用SQL语句备份和恢复"><span class="toc-number">2.2.1.</span> <span class="toc-text">一、使用SQL语句备份和恢复</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#二、数据库备份的导入"><span class="toc-number">2.2.2.</span> <span class="toc-text">二、数据库备份的导入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#三、使用mysqlimport恢复数据"><span class="toc-number">2.2.3.</span> <span class="toc-text">三、使用mysqlimport恢复数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#四、使用mysqldump备份数据"><span class="toc-number">2.2.4.</span> <span class="toc-text">四、使用mysqldump备份数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#五、有关生成SQL语句的优化控制"><span class="toc-number">2.2.5.</span> <span class="toc-text">五、有关生成SQL语句的优化控制</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#【思考】-1"><span class="toc-number">2.3.</span> <span class="toc-text">【思考】</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#（三）字符串模式匹配"><span class="toc-number">3.</span> <span class="toc-text">（三）字符串模式匹配</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#【原理】-2"><span class="toc-number">3.1.</span> <span class="toc-text">【原理】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#【步骤】-2"><span class="toc-number">3.2.</span> <span class="toc-text">【步骤】</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#一、环境构建"><span class="toc-number">3.2.1.</span> <span class="toc-text">一、环境构建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#二、标准的SQL模式匹配"><span class="toc-number">3.2.2.</span> <span class="toc-text">二、标准的SQL模式匹配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#三、扩展正则表达式模式匹配"><span class="toc-number">3.2.3.</span> <span class="toc-text">三、扩展正则表达式模式匹配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#四、列的别名"><span class="toc-number">3.2.4.</span> <span class="toc-text">四、列的别名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#五、表的别名"><span class="toc-number">3.2.5.</span> <span class="toc-text">五、表的别名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#六、取出互不相同的记录"><span class="toc-number">3.2.6.</span> <span class="toc-text">六、取出互不相同的记录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#七、NULL值的问题"><span class="toc-number">3.2.7.</span> <span class="toc-text">七、NULL值的问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#八、大小写敏感性"><span class="toc-number">3.2.8.</span> <span class="toc-text">八、大小写敏感性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#九、检索语句与多个表的连接"><span class="toc-number">3.2.9.</span> <span class="toc-text">九、检索语句与多个表的连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#十、全连接"><span class="toc-number">3.2.10.</span> <span class="toc-text">十、全连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#十一、左连接"><span class="toc-number">3.2.11.</span> <span class="toc-text">十一、左连接</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#（四）集合函数"><span class="toc-number">4.</span> <span class="toc-text">（四）集合函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#【原理】-3"><span class="toc-number">4.1.</span> <span class="toc-text">【原理】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#【步骤】-3"><span class="toc-number">4.2.</span> <span class="toc-text">【步骤】</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#一、环境构建-1"><span class="toc-number">4.2.1.</span> <span class="toc-text">一、环境构建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#二、行列计数"><span class="toc-number">4.2.2.</span> <span class="toc-text">二、行列计数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#三、统计字段值的数目"><span class="toc-number">4.2.3.</span> <span class="toc-text">三、统计字段值的数目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#四、计算字段的平均值"><span class="toc-number">4.2.4.</span> <span class="toc-text">四、计算字段的平均值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#五、计算字段值的和"><span class="toc-number">4.2.5.</span> <span class="toc-text">五、计算字段值的和</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#六、计算字段值的极值"><span class="toc-number">4.2.6.</span> <span class="toc-text">六、计算字段值的极值</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#（五）时间函数"><span class="toc-number">5.</span> <span class="toc-text">（五）时间函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#【原理】-4"><span class="toc-number">5.1.</span> <span class="toc-text">【原理】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#【步骤】-4"><span class="toc-number">5.2.</span> <span class="toc-text">【步骤】</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#一、环境构建-2"><span class="toc-number">5.2.1.</span> <span class="toc-text">一、环境构建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#二、返回当前日期和时间"><span class="toc-number">5.2.2.</span> <span class="toc-text">二、返回当前日期和时间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#三、自动记录数据的改变时间"><span class="toc-number">5.2.3.</span> <span class="toc-text">三、自动记录数据的改变时间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#四、返回日期和时间范围"><span class="toc-number">5.2.4.</span> <span class="toc-text">四、返回日期和时间范围</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#（六）数据表操作"><span class="toc-number">6.</span> <span class="toc-text">（六）数据表操作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#【原理】-5"><span class="toc-number">6.1.</span> <span class="toc-text">【原理】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#【步骤】-5"><span class="toc-number">6.2.</span> <span class="toc-text">【步骤】</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#一、Mysql数据表的基本操作"><span class="toc-number">6.2.1.</span> <span class="toc-text">一、Mysql数据表的基本操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#二、向数据表中插入数据"><span class="toc-number">6.2.2.</span> <span class="toc-text">二、向数据表中插入数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#三、查询数据表中的记录"><span class="toc-number">6.2.3.</span> <span class="toc-text">三、查询数据表中的记录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#四、查询分组和行技术"><span class="toc-number">6.2.4.</span> <span class="toc-text">四、查询分组和行技术</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#（八）数据库连接"><span class="toc-number">7.</span> <span class="toc-text">（八）数据库连接</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#【原理】-6"><span class="toc-number">7.1.</span> <span class="toc-text">【原理】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#【步骤】-6"><span class="toc-number">7.2.</span> <span class="toc-text">【步骤】</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#一、建立和中止与服务器的连接"><span class="toc-number">7.2.1.</span> <span class="toc-text">一、建立和中止与服务器的连接</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#（九）启动与关闭"><span class="toc-number">8.</span> <span class="toc-text">（九）启动与关闭</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#【原理】-7"><span class="toc-number">8.1.</span> <span class="toc-text">【原理】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#【步骤】-7"><span class="toc-number">8.2.</span> <span class="toc-text">【步骤】</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#一、Mysql的启动与终止"><span class="toc-number">8.2.1.</span> <span class="toc-text">一、Mysql的启动与终止</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#（十）安装"><span class="toc-number">9.</span> <span class="toc-text">（十）安装</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#【实验原理】"><span class="toc-number">9.1.</span> <span class="toc-text">【实验原理】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#【步骤】-8"><span class="toc-number">9.2.</span> <span class="toc-text">【步骤】</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#一、通过rpm来进行mysql-server的安装"><span class="toc-number">9.2.1.</span> <span class="toc-text">一、通过rpm来进行mysql-server的安装</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#（十一）设置与测试"><span class="toc-number">10.</span> <span class="toc-text">（十一）设置与测试</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#【实验原理】-1"><span class="toc-number">10.1.</span> <span class="toc-text">【实验原理】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#【步骤】-9"><span class="toc-number">10.2.</span> <span class="toc-text">【步骤】</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#一、初始化授权表"><span class="toc-number">10.2.1.</span> <span class="toc-text">一、初始化授权表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#二、测试"><span class="toc-number">10.2.2.</span> <span class="toc-text">二、测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#三、Mysql数据库的主要配置文件"><span class="toc-number">10.2.3.</span> <span class="toc-text">三、Mysql数据库的主要配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#四、更改root用户的密码"><span class="toc-number">10.2.4.</span> <span class="toc-text">四、更改root用户的密码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#【思考】-2"><span class="toc-number">10.3.</span> <span class="toc-text">【思考】</span></a></li></ol></li></ol>
                </div>
            </div>
            
            
        </div>
    </div>
</div>

    </div>
</div>
    <div id="back-to-top" class="animated fadeIn faster">
        <div class="flow"></div>
        <span class="percentage animated fadeIn faster">0%</span>
        <span class="iconfont icon-top02 animated fadeIn faster"></span>
    </div>
</body>
<footer>
    <p class="copyright" id="copyright">
        &copy; 2019
        <span class="gradient-text">
            Knlvre
        </span>.
        Powered by <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a>
        Theme
        <span class="gradient-text">
            <a href="https://github.com/TriDiamond/hexo-theme-obsidian" title="Obsidian" target="_blank" rel="noopener">Obsidian</a>
        </span>
        <small><a href="https://github.com/TriDiamond/hexo-theme-obsidian/blob/master/CHANGELOG.md" title="v1.4.3" target="_blank" rel="noopener">v1.4.3</a></small>
    </p>
</footer>

<script type="text/javascript" src="https://cdn.bootcss.com/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<script>
  MathJax.Hub.Config({
    "HTML-CSS": {
      preferredFont: "TeX",
      availableFonts: ["STIX", "TeX"],
      linebreaks: {
        automatic: true
      },
      EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
      inlineMath: [
        ["$", "$"],
        ["\\(", "\\)"]
      ],
      processEscapes: true,
      ignoreClass: "tex2jax_ignore|dno",
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      noUndefined: {
        attributes: {
          mathcolor: "red",
          mathbackground: "#FFEEEE",
          mathsize: "90%"
        }
      },
      Macros: {
        href: "{}"
      }
    },
    messageStyle: "none"
  });
</script>
<script>
  function initialMathJax() {
    MathJax.Hub.Queue(function () {
      var all = MathJax.Hub.getAllJax(),
        i;
      // console.log(all);
      for (i = 0; i < all.length; i += 1) {
        console.log(all[i].SourceElement().parentNode)
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  }

  function reprocessMathJax() {
    if (typeof MathJax !== 'undefined') {
      MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
    }
  }
</script>



    <link rel="stylesheet" href="//cdn.bootcss.com/gitalk/1.5.0/gitalk.min.css">
    <script src="//cdn.bootcss.com/gitalk/1.5.0/gitalk.min.js"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="/knlvre.github.io/js/plugin.js"></script>
<script src="/knlvre.github.io/js/obsidian.js"></script>
<script src="/knlvre.github.io/js/jquery.truncate.js"></script>
<script src="/knlvre.github.io/js/search.js"></script>
<script src="//cdn.bootcss.com/typed.js/2.0.10/typed.min.js"></script>
<script src="//cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>

<script src="https://cdn.bootcss.com/codemirror/5.48.4/codemirror.min.js"></script>

    <script src="//cdn.bootcss.com/codemirror/5.48.4/mode/javascript/javascript.min.js"></script>

    <script src="//cdn.bootcss.com/codemirror/5.48.4/mode/css/css.min.js"></script>

    <script src="//cdn.bootcss.com/codemirror/5.48.4/mode/xml/xml.min.js"></script>

    <script src="//cdn.bootcss.com/codemirror/5.48.4/mode/htmlmixed/htmlmixed.min.js"></script>

    <script src="//cdn.bootcss.com/codemirror/5.48.4/mode/clike/clike.min.js"></script>

    <script src="//cdn.bootcss.com/codemirror/5.48.4/mode/php/php.min.js"></script>

    <script src="//cdn.bootcss.com/codemirror/5.48.4/mode/shell/shell.min.js"></script>

    <script src="//cdn.bootcss.com/codemirror/5.48.4/mode/python/python.min.js"></script>



    <script src="/knlvre.github.io/js/busuanzi.min.js"></script>
    <script>
        $(document).ready(function () {
            if ($('span[id^="busuanzi_"]').length) {
                initialBusuanzi();
            }
        });
    </script>


<link rel="stylesheet" href="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="//cdn.bootcss.com/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>



    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="//www.googletagmanager.com/gtag/js?id=UA-149874671-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-149874671-1');
    </script>





<script>
    function initialTyped () {
        var typedTextEl = $('.typed-text');
        if (typedTextEl && typedTextEl.length > 0) {
            var typed = new Typed('.typed-text', {
                strings: ["Notes During Information Security Learning.", "信息安全学习过程中的笔记。"],
                typeSpeed: 90,
                loop: true,
                loopCount: Infinity,
                backSpeed: 20,
            });
        }
    }

    if ($('.article-header') && $('.article-header').length) {
        $(document).ready(function () {
            initialTyped();
        });
    }
</script>




</html>
